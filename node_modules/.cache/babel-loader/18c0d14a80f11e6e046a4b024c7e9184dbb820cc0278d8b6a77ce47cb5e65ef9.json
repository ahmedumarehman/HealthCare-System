{"ast":null,"code":"import _objectSpread from\"D:/DATA/CAREER/INTERNSHIPS/EMRChains Internship NSTP/PROJECTS/HEALTHCARE_SYSTEM/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import Badge from'../UI/Badge';import Timer from'../UI/Timer';import{RoleBasedAccessService}from'../../services/rbacService';import{EncryptionService}from'../../services/encryption';import{sharedStateService}from'../../services/sharedState';import{pdfService}from'../../services/pdfService';import{firebaseService}from'../../services/firebaseService';import{clipboardSecurityService}from'../../services/clipboardSecurityService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DoctorDashboard=_ref=>{let{user,onLogout}=_ref;const[sessionTimeLeft]=useState(1800);const[rbacService]=useState(new RoleBasedAccessService());const[activeTab,setActiveTab]=useState('patients');// Modal states\nconst[showCreateRecordModal,setShowCreateRecordModal]=useState(false);const[showClaimModal,setShowClaimModal]=useState(false);const[,setSelectedPatientId]=useState('');// Security states\nconst[clipboardMonitoring,setClipboardMonitoring]=useState(false);const[clipboardAlert,setClipboardAlert]=useState(null);const[encryptedRecords,setEncryptedRecords]=useState({});const[recordEncryptionStatus,setRecordEncryptionStatus]=useState({});const[selectedFiles,setSelectedFiles]=useState([]);const[selectedEncryptedFiles,setSelectedEncryptedFiles]=useState([]);// Firebase sync state\nconst[isLoadingFromFirebase,setIsLoadingFromFirebase]=useState(true);const[firebaseRecords,setFirebaseRecords]=useState([]);const[firebasePatients,setFirebasePatients]=useState([]);// Form states\nconst[newRecordForm,setNewRecordForm]=useState({patientId:'',title:'',description:'',diagnosis:'',prescription:'',notes:''});const[newClaimForm,setNewClaimForm]=useState({patientId:'',amount:'',description:'',insuranceProvider:''});const[myPatients,setMyPatients]=useState([]);const[recentRecords,setRecentRecords]=useState([]);// Initialize data from Firebase and shared state service\nuseEffect(()=>{const initializeData=async()=>{setIsLoadingFromFirebase(true);try{// Initialize Firebase with sample data if needed\nawait firebaseService.initializeSampleData();// Load data from Firebase (for doctor dashboard only)\nconst[firebaseRecordsData,firebasePatientsData]=await Promise.all([firebaseService.getMedicalRecords(),firebaseService.getPatients()]);setFirebaseRecords(firebaseRecordsData);setFirebasePatients(firebasePatientsData);setRecentRecords(firebaseRecordsData);// Doctor sees Firebase records\nsetMyPatients(firebasePatientsData);// Set up real-time listeners for Firebase data\nconst unsubscribeFirebaseRecords=firebaseService.onMedicalRecordsChange(records=>{setFirebaseRecords(records);setRecentRecords(records);// Doctor dashboard shows Firebase records\n});const unsubscribeFirebasePatients=firebaseService.onPatientsChange(patients=>{setFirebasePatients(patients);setMyPatients(patients);});// Also sync patient-added records from shared state to Firebase\nconst unsubscribeSharedRecords=sharedStateService.onMedicalRecordsChange(async sharedRecords=>{// When patient adds a record via shared state, sync it to Firebase\nfor(const record of sharedRecords){// Check if this record exists in Firebase\nconst existsInFirebase=firebaseRecordsData.some(fbRecord=>fbRecord.patientId===record.patientId&&fbRecord.title===record.title&&fbRecord.date===record.date);if(!existsInFirebase){try{// Add to Firebase\nawait firebaseService.addMedicalRecord({patientId:record.patientId,doctorId:record.doctorId,title:record.title,description:record.description,date:record.date,diagnosis:record.diagnosis,prescription:record.prescription,isEncrypted:record.isEncrypted,isVerified:record.isVerified,accessPermissions:record.accessPermissions,blockchainHash:record.blockchainHash||'',ipfsHash:record.ipfsHash||'',nftTokenId:record.nftTokenId||''});console.log('Synced new patient record to Firebase:',record.title);}catch(error){console.error('Failed to sync record to Firebase:',error);}}}});// Cleanup function\nreturn()=>{unsubscribeFirebaseRecords();unsubscribeFirebasePatients();unsubscribeSharedRecords();};}catch(error){console.error('Failed to load Firebase data:',error);// Fallback to shared state if Firebase fails\nconst patients=sharedStateService.getPatients();const allRecords=sharedStateService.getMedicalRecords();setMyPatients(patients);setRecentRecords(allRecords);}finally{setIsLoadingFromFirebase(false);}};initializeData();},[user.id]);const[insuranceClaims]=useState([{id:'claim-1',claimNumber:'CLM-2025-001',patientId:'patient-1',providerId:user.id,doctorId:user.id,insuranceCompany:'HealthFirst Insurance',insuranceProvider:'HealthFirst Insurance',amount:450.00,status:'approved',submittedAt:'2025-07-01T10:00:00Z',submissionDate:'2025-07-01',approvalDate:'2025-07-03',description:'Annual physical examination and blood work',relatedRecords:['record-1'],smartContractAddress:'0x1234567890abcdef1234567890abcdef12345678',blockchainTxId:'0xabc123def456789abcdef123456789abc123def456789abcdef',isProcessedOnChain:true,approvalSignatures:[],ipfsDocuments:[]},{id:'claim-2',claimNumber:'CLM-2025-002',patientId:'patient-2',providerId:user.id,doctorId:user.id,insuranceCompany:'MediCare Plus',insuranceProvider:'MediCare Plus',amount:275.50,status:'pending',submittedAt:'2025-07-04T14:30:00Z',submissionDate:'2025-07-04',description:'Follow-up consultation and medication review',relatedRecords:['record-2'],smartContractAddress:'0x1234567890abcdef1234567890abcdef12345678',blockchainTxId:'0xdef456abc789123def456abc789123def456abc789123def',isProcessedOnChain:false,approvalSignatures:[],ipfsDocuments:[]}]);const[nftRecords]=useState([{id:'nft-1',tokenId:'HEALTH-NFT-001',patientId:'patient-1',recordId:'record-1',name:'Annual Physical 2025',description:'Comprehensive health examination record',imageUrl:'https://via.placeholder.com/200x200/4F46E5/FFFFFF?text=NFT-001',metadataUri:'ipfs://QmX9ZB7tRvWKHGK8P2mNv3qL5rA9wS6cF4dE2gH1jK0mP',contractAddress:'0x9876543210fedcba9876543210fedcba98765432',blockchainNetwork:'Ethereum',mintDate:'2025-07-04T10:30:00Z',currentOwner:'patient-1',isTransferable:false,accessLevel:'doctor_patient'},{id:'nft-2',tokenId:'HEALTH-NFT-002',patientId:'patient-2',recordId:'record-2',name:'Follow-up Consultation',description:'Treatment follow-up and medication adjustment',imageUrl:'https://via.placeholder.com/200x200/059669/FFFFFF?text=NFT-002',metadataUri:'ipfs://QmY8AX6sRvWKHGK8P2mNv3qL5rA9wS6cF4dE2gH1jK0nQ',contractAddress:'0x9876543210fedcba9876543210fedcba98765432',blockchainNetwork:'Ethereum',mintDate:'2025-07-03T14:45:00Z',currentOwner:'patient-2',isTransferable:false,accessLevel:'doctor_patient'}]);useEffect(()=>{rbacService.setCurrentUser(user);},[user,rbacService]);const handleSessionExpire=()=>{window.confirm('Session expired for security. Please login again.')&&onLogout();};const handleCreateRecord=()=>{setShowCreateRecordModal(true);};const handleSubmitInsuranceClaim=patientId=>{setSelectedPatientId(patientId);setNewClaimForm(prev=>_objectSpread(_objectSpread({},prev),{},{patientId}));setShowClaimModal(true);};const handleMintNFT=recordId=>{alert(\"NFT minting initiated for record \".concat(recordId,\". This will create a secure, immutable NFT on the blockchain.\"));console.log(\"Minting NFT for record: \".concat(recordId));};const handleViewHistory=patientId=>{const patient=myPatients.find(p=>p.id===patientId);const patientRecords=recentRecords.filter(record=>record.patientId===patientId);if(patient&&patientRecords.length>0){const historyDetails=patientRecords.map(record=>\"\\uD83D\\uDCCB \".concat(record.title,\" (\").concat(record.date,\")\\n   Diagnosis: \").concat(record.diagnosis,\"\\n   Prescription: \").concat(record.prescription)).join('\\n\\n');alert(\"\\uD83D\\uDC65 Medical History for \".concat(patient.name,\"\\n\\uD83D\\uDCE7 Email: \").concat(patient.email,\"\\n\\uD83C\\uDF82 DOB: \").concat(patient.dateOfBirth,\"\\n\\uD83C\\uDFE5 Insurance: \").concat(patient.insuranceProvider,\"\\n\\uD83D\\uDCDE Phone: \").concat(patient.phoneNumber,\"\\n\\uD83C\\uDFE0 Address: \").concat(patient.address,\"\\n\\uD83D\\uDEA8 Emergency Contact: \").concat(patient.emergencyContact,\"\\n\\uD83D\\uDCC5 Last Visit: \").concat(patient.lastVisit,\"\\n\\u23ED\\uFE0F Next Appointment: \").concat(patient.upcomingAppointment,\"\\n\\n\\uD83D\\uDCCB MEDICAL RECORDS:\\n\").concat(historyDetails,\"\\n\\nTotal Records: \").concat(patientRecords.length));}else{alert(\"No medical history found for this patient.\");}};const handleEncryptRecord=recordId=>{const record=recentRecords.find(r=>r.id===recordId);if(record){var _myPatients$find;// Check if already encrypted\nif(recordEncryptionStatus[recordId]){alert('âš ï¸ This record is already encrypted. Please decrypt it first if you want to re-encrypt with a different password.');return;}const password=prompt(\"\\uD83D\\uDD12 Enter a password to encrypt \\\"\".concat(record.title,\"\\\" for patient: \").concat(((_myPatients$find=myPatients.find(p=>p.id===record.patientId))===null||_myPatients$find===void 0?void 0:_myPatients$find.name)||record.patientId));if(password&&password.trim()){try{var _myPatients$find2;// Create a custom encryption service with the user's password\nconst customEncryption=new EncryptionService();const recordData=_objectSpread(_objectSpread({},record),{},{encryptedBy:user.name,encryptedAt:new Date().toISOString()});// Use password-based encryption\nconst salt=customEncryption.generateSalt();customEncryption.deriveKey(password,salt);// Generate derived key for security\nconst encryptedData=customEncryption.encryptData(JSON.stringify(recordData));// Store the encrypted data and metadata\nsetEncryptedRecords(prev=>_objectSpread(_objectSpread({},prev),{},{[recordId]:encryptedData}));setRecordEncryptionStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[recordId]:true}));alert(\"\\uD83D\\uDD12 SUCCESS! Record \\\"\".concat(record.title,\"\\\" has been encrypted with your custom password.\\n                    \\n\\uD83D\\uDCCB Record: \").concat(record.title,\"\\n\\uD83D\\uDC64 Patient: \").concat((_myPatients$find2=myPatients.find(p=>p.id===record.patientId))===null||_myPatients$find2===void 0?void 0:_myPatients$find2.name,\"\\n\\uD83D\\uDD10 Status: ENCRYPTED\\n\\uD83D\\uDEE1\\uFE0F Security Level: AES-256 + Password Protection\\n\\uD83D\\uDCC5 Encrypted At: \").concat(new Date().toLocaleString(),\"\\n\\uD83D\\uDC68\\u200D\\u2695\\uFE0F Encrypted By: \").concat(user.name,\"\\n\\n\\u26A0\\uFE0F Remember your password - it will be required for decryption!\"));}catch(error){alert('âŒ Encryption failed. Please try again.');}}else{alert('âŒ Password is required for encryption.');}}};const handleDecryptRecord=recordId=>{// Check if record is encrypted\nif(!recordEncryptionStatus[recordId]){alert('â„¹ï¸ This record is not encrypted. No decryption needed.');return;}const encryptedData=encryptedRecords[recordId];if(encryptedData){const password=prompt(\"\\uD83D\\uDD13 Enter the password to decrypt this record:\");if(password&&password.trim()){try{var _myPatients$find3;const customEncryption=new EncryptionService();// For demo purposes, we'll try to decrypt with the provided password\n// In a real system, you'd verify the password against the stored hash\nconst decryptedData=customEncryption.decryptData(encryptedData);const record=JSON.parse(decryptedData);alert(\"\\uD83D\\uDD13 DECRYPTION SUCCESSFUL!\\n\\n\\uD83D\\uDCCB Title: \".concat(record.title,\"\\n\\uD83D\\uDC64 Patient: \").concat(((_myPatients$find3=myPatients.find(p=>p.id===record.patientId))===null||_myPatients$find3===void 0?void 0:_myPatients$find3.name)||record.patientId,\"\\n\\uD83D\\uDCC5 Date: \").concat(record.date,\"\\n\\uD83E\\uDE7A Diagnosis: \").concat(record.diagnosis,\"\\n\\uD83D\\uDC8A Prescription: \").concat(record.prescription,\"\\n\\uD83D\\uDCDD Description: \").concat(record.description,\"\\n\\n\\uD83D\\uDD12 Encryption Details:\\n\\uD83D\\uDC68\\u200D\\u2695\\uFE0F Encrypted By: \").concat(record.encryptedBy||'Unknown',\"\\n\\uD83D\\uDCC5 Encrypted At: \").concat(record.encryptedAt?new Date(record.encryptedAt).toLocaleString():'Unknown',\"\\n\\uD83D\\uDEE1\\uFE0F Security: Password-protected AES-256\"));// Ask if user wants to permanently decrypt\nconst permanentDecrypt=window.confirm('ðŸ”“ Do you want to permanently decrypt this record? (This will remove encryption)');if(permanentDecrypt){setEncryptedRecords(prev=>{const updated=_objectSpread({},prev);delete updated[recordId];return updated;});setRecordEncryptionStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[recordId]:false}));alert('âœ… Record has been permanently decrypted and is now in plain text.');}}catch(error){alert('âŒ Decryption failed. Incorrect password or corrupted data.');}}else{alert('âŒ Password is required for decryption.');}}else{alert('âŒ No encrypted data found for this record.');}};const handleViewRecord=recordId=>{const record=recentRecords.find(r=>r.id===recordId);if(record){const isEncrypted=recordEncryptionStatus[recordId];const patient=myPatients.find(p=>p.id===record.patientId);if(isEncrypted){const viewEncrypted=window.confirm(\"\\uD83D\\uDD12 This record is encrypted. \\n\\nDo you want to:\\n- Click \\\"OK\\\" to view encrypted version\\n- Click \\\"Cancel\\\" to decrypt and view\");if(viewEncrypted){// Show encrypted version\nalert(\"\\uD83D\\uDD12 ENCRYPTED RECORD VIEW\\n\\n\\uD83D\\uDCCB Title: \".concat(record.title,\"\\n\\uD83D\\uDC64 Patient: \").concat((patient===null||patient===void 0?void 0:patient.name)||record.patientId,\"\\n\\uD83D\\uDCC5 Date: \").concat(record.date,\"\\n\\uD83D\\uDD10 Status: ENCRYPTED\\n\\uD83D\\uDEE1\\uFE0F Security: Password Protected\\n\\n\\u26A0\\uFE0F Content is encrypted and cannot be displayed in plain text.\\nUse the decrypt button to view the full content.\"));}else{// Trigger decryption process\nhandleDecryptRecord(recordId);}}else{// Show full record details\nalert(\"\\uD83D\\uDC41\\uFE0F MEDICAL RECORD DETAILS\\n\\n\\uD83D\\uDCCB Title: \".concat(record.title,\"\\n\\uD83D\\uDC64 Patient: \").concat((patient===null||patient===void 0?void 0:patient.name)||record.patientId,\"\\n\\uD83D\\uDCE7 Email: \").concat((patient===null||patient===void 0?void 0:patient.email)||'N/A',\"\\n\\uD83D\\uDCC5 Date: \").concat(record.date,\"\\n\\uD83E\\uDE7A Diagnosis: \").concat(record.diagnosis,\"\\n\\uD83D\\uDC8A Prescription: \").concat(record.prescription,\"\\n\\uD83D\\uDCDD Description: \").concat(record.description,\"\\n\\n\\uD83D\\uDD17 Blockchain Details:\\n\\uD83E\\uDDF1 Hash: \").concat(record.blockchainHash||'N/A',\"\\n\\uD83D\\uDCCE IPFS: \").concat(record.ipfsHash||'N/A',\"\\n\\uD83C\\uDFA8 NFT Token: \").concat(record.nftTokenId||'Not minted',\"\\n\\u2705 Verified: \").concat(record.isVerified?'Yes':'No',\"\\n\\uD83D\\uDD10 Encryption: Not encrypted\"));}}};const toggleClipboardMonitoring=async()=>{const newState=!clipboardMonitoring;setClipboardMonitoring(newState);if(newState){// Request clipboard permission first\nconst hasPermission=await clipboardSecurityService.requestClipboardPermission();if(hasPermission){// Start monitoring with callback\nclipboardSecurityService.startMonitoring((address,isFake)=>{setClipboardAlert({address,isFake,timestamp:Date.now()});if(isFake){// Show urgent warning for fake addresses\nalert(\"\\uD83D\\uDEA8 SECURITY ALERT!\\n\\nSuspicious wallet address detected:\\n\".concat(address,\"\\n\\nThis address appears to be fake or compromised. Please verify before proceeding with any transactions.\"));}else{// Show gentle notification for normal addresses\nconsole.log(\"\\uD83D\\uDCCB Wallet address detected: \".concat(address));}// Clear alert after 10 seconds\nsetTimeout(()=>{setClipboardAlert(null);},10000);});alert('ðŸ” Clipboard monitoring enabled with sound alerts. The system will monitor for suspicious wallet addresses and play audio warnings.');}else{setClipboardMonitoring(false);alert('âŒ Clipboard permission denied. Monitoring cannot be enabled without clipboard access.');}}else{clipboardSecurityService.stopMonitoring();setClipboardAlert(null);alert('â¹ï¸ Clipboard monitoring disabled.');}};const handleViewInsuranceClaim=claimId=>{const claim=insuranceClaims.find(c=>c.id===claimId);if(claim){const patient=myPatients.find(p=>p.id===claim.patientId);alert(\"\\uD83D\\uDCB0 Insurance Claim Details\\n\\n\\uD83D\\uDCCB Claim Number: \".concat(claim.claimNumber,\"\\n\\uD83D\\uDC64 Patient: \").concat((patient===null||patient===void 0?void 0:patient.name)||claim.patientId,\"\\n\\uD83D\\uDCB5 Amount: $\").concat(claim.amount.toFixed(2),\"\\n\\uD83D\\uDCCA Status: \").concat(claim.status.toUpperCase(),\"\\n\\uD83C\\uDFE5 Insurance Provider: \").concat(claim.insuranceProvider,\"\\n\\uD83D\\uDCC5 Submitted: \").concat(claim.submissionDate,\"\\n\").concat(claim.approvalDate?\"\\u2705 Approved: \".concat(claim.approvalDate):'â³ Pending approval',\"\\n\\uD83D\\uDCDD Description: \").concat(claim.description||'No description provided',\"\\n\\n\\uD83D\\uDD17 Blockchain Details:\\n\\uD83D\\uDCCB Contract Address: \").concat(claim.smartContractAddress,\"\\n\\uD83C\\uDD94 Transaction ID: \").concat(claim.blockchainTxId,\"\\n\\u26D3\\uFE0F On-Chain Status: \").concat(claim.isProcessedOnChain?'Processed':'Pending',\"\\n\\n\\uD83D\\uDCC4 Related Records: \").concat(claim.relatedRecords.length,\" record(s)\\n\\uD83D\\uDCCE Documents: \").concat(claim.ipfsDocuments.length,\" file(s) on IPFS\"));}};const handleSaveRecord=()=>{if(!newRecordForm.title||!newRecordForm.patientId){alert('Please fill in all required fields');return;}// Find patient details\nconst patient=myPatients.find(p=>p.id===newRecordForm.patientId);if(!patient){alert('Patient not found');return;}// Create new record with proper ID generation\nconst newRecord={id:sharedStateService.generateId('record'),patientId:newRecordForm.patientId,doctorId:user.id,title:newRecordForm.title,description:newRecordForm.description,date:new Date().toISOString().split('T')[0],// Format as YYYY-MM-DD\ndiagnosis:newRecordForm.diagnosis,prescription:newRecordForm.prescription,isEncrypted:false,// Initially not encrypted\nisVerified:true,accessPermissions:[user.id,newRecordForm.patientId],blockchainHash:\"0x\".concat(Date.now().toString(16),\"abc\").concat(Math.random().toString(16).slice(2,8)),ipfsHash:\"Qm\".concat(Math.random().toString(36).slice(2,15)).concat(Date.now().toString(36)),nftTokenId:undefined// Will be set when NFT is minted\n};// Add to shared state (will automatically update all components)\nsharedStateService.addMedicalRecord(newRecord);// Show success message with patient name\nalert(\"\\u2705 Medical record created successfully!\\n\\n\\uD83D\\uDCCB Record: \".concat(newRecord.title,\"\\n\\uD83D\\uDC64 Patient: \").concat(patient.name,\"\\n\\uD83D\\uDCC5 Date: \").concat(newRecord.date,\"\\n\\uD83E\\uDE7A Diagnosis: \").concat(newRecord.diagnosis,\"\\n\\uD83D\\uDC8A Prescription: \").concat(newRecord.prescription,\"\\n\\nThe record has been added to your medical records list and is ready for encryption if needed.\"));setShowCreateRecordModal(false);setNewRecordForm({patientId:'',title:'',description:'',diagnosis:'',prescription:'',notes:''});};const handleSaveClaim=()=>{if(!newClaimForm.amount||!newClaimForm.description){alert('Please fill in all required fields');return;}// Create new insurance claim\n// const newClaim: InsuranceClaim = {\n//     id: `claim-${Date.now()}`,\n//     claimNumber: `CLAIM-${Date.now()}`,\n//     patientId: newClaimForm.patientId,\n//     providerId: user.id,\n//     doctorId: user.id,\n//     insuranceCompany: newClaimForm.insuranceProvider,\n//     insuranceProvider: newClaimForm.insuranceProvider,\n//     amount: parseFloat(newClaimForm.amount),\n//     status: 'pending',\n//     submittedAt: new Date().toISOString(),\n//     submissionDate: new Date().toLocaleDateString(),\n//     description: newClaimForm.description,\n//     relatedRecords: [],\n//     smartContractAddress: '0x1234567890abcdef1234567890abcdef12345678',\n//     blockchainTxId: `0x${Date.now().toString(16)}`,\n//     isProcessedOnChain: false,\n//     approvalSignatures: [],\n//     ipfsDocuments: []\n// };\nalert('Insurance claim submitted successfully!');setShowClaimModal(false);setNewClaimForm({patientId:'',amount:'',description:'',insuranceProvider:''});};const getStatusColor=status=>{switch(status){case'approved':return'success';case'pending':return'warning';case'rejected':return'error';case'paid':return'success';case'under_review':return'info';case'submitted':return'primary';default:return'secondary';}};const handleDownloadPDF=async recordId=>{const record=recentRecords.find(r=>r.id===recordId);if(!record){alert('Record not found');return;}const patient=myPatients.find(p=>p.id===record.patientId);if(!patient){alert('Patient not found');return;}try{// Always download unencrypted PDF (encryption will be done in Security Tools)\nawait pdfService.downloadMedicalRecordPDF(record,patient,{includeWatermark:true,isEncrypted:false,password:''});alert(\"\\u2705 PDF Downloaded Successfully!\\n\\n\\uD83D\\uDCC4 File: medical_record_\".concat(record.id,\"_\").concat(patient.name.replace(/\\s+/g,'_'),\".pdf\\n\\uD83D\\uDD10 Status: UNENCRYPTED (ready for encryption in Security Tools)\\n\\uD83D\\uDEA8 Watermark: CONFIDENTIAL (at top of document)\\n\\uD83D\\uDC64 Patient: \").concat(patient.name,\"\\n\\uD83D\\uDCCB Record: \").concat(record.title,\"\\n\\n\\uD83D\\uDCA1 Next Steps:\\n1. Go to Security Tools tab\\n2. Select this PDF file to encrypt\\n3. Choose a strong password for encryption\\n\\nThe PDF has been saved to your downloads folder.\"));}catch(error){console.error('PDF download error:',error);alert(\"\\u274C Failed to download PDF: \".concat(error instanceof Error?error.message:'Unknown error'));}};const handleDownloadPatientPDF=async patientId=>{const patient=myPatients.find(p=>p.id===patientId);if(!patient){alert('Patient not found');return;}const patientRecords=recentRecords.filter(record=>record.patientId===patientId);if(patientRecords.length===0){alert(\"No medical records found for \".concat(patient.name,\". Create some records first.\"));return;}try{if(patientRecords.length===1){// Single record\nawait pdfService.downloadMedicalRecordPDF(patientRecords[0],patient,{includeWatermark:true,isEncrypted:false,password:''});}else{// Multiple records - use batch PDF\nconst batchPDF=await pdfService.generateBatchPDF(patientRecords,[patient],{includeWatermark:true,isEncrypted:false,password:''});// Create download link for batch PDF\nconst url=URL.createObjectURL(batchPDF);const link=document.createElement('a');link.href=url;const filename=\"medical_records_\".concat(patient.name.replace(/\\s+/g,'_'),\"_batch.pdf\");link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);}alert(\"\\u2705 PDF Downloaded Successfully!\\n\\n\\uD83D\\uDC64 Patient: \".concat(patient.name,\"\\n\\uD83D\\uDCC4 Records: \").concat(patientRecords.length,\" medical record(s)\\n\\uD83D\\uDD10 Status: UNENCRYPTED (ready for encryption in Security Tools)\\n\\uD83D\\uDEA8 Watermark: CONFIDENTIAL (at top of document)\\n\\n\\uD83D\\uDCA1 Next Steps:\\n1. Go to Security Tools tab\\n2. Select this PDF file to encrypt\\n3. Choose a strong password for encryption\\n\\nThe PDF has been saved to your downloads folder.\"));}catch(error){console.error('PDF download error:',error);alert(\"\\u274C Failed to download PDF: \".concat(error instanceof Error?error.message:'Unknown error'));}};const handleAddNewPatient=()=>{const patientName=prompt('ðŸ‘¤ Enter new patient name:');if(!patientName||!patientName.trim()){alert('âŒ Patient name is required');return;}const patientEmail=prompt('ðŸ“§ Enter patient email:');if(!patientEmail||!patientEmail.trim()||!patientEmail.includes('@')){alert('âŒ Valid email is required');return;}const patientDOB=prompt('ðŸŽ‚ Enter patient date of birth (YYYY-MM-DD):');if(!patientDOB||!patientDOB.match(/^\\d{4}-\\d{2}-\\d{2}$/)){alert('âŒ Date of birth is required in YYYY-MM-DD format');return;}const phoneNumber=prompt('ðŸ“ž Enter patient phone number:')||'';const address=prompt('ðŸ  Enter patient address:')||'';const emergencyContact=prompt('ðŸš¨ Enter emergency contact (Name - Phone):')||'';const insuranceProvider=prompt('ðŸ¥ Enter insurance provider:')||'None';const insurancePolicyNumber=prompt('ðŸ“„ Enter insurance policy number:')||'';const newPatient={id:sharedStateService.generateId('patient'),name:patientName.trim(),email:patientEmail.trim(),dateOfBirth:patientDOB,phoneNumber:phoneNumber,address:address,emergencyContact:emergencyContact,insuranceProvider:insuranceProvider,insurancePolicyNumber:insurancePolicyNumber,lastVisit:new Date().toISOString().split('T')[0],upcomingAppointment:'To be scheduled',isActive:true};// Add to shared state\nsharedStateService.addPatient(newPatient);alert(\"\\u2705 New patient added successfully!\\n\\n\\uD83D\\uDC64 Name: \".concat(newPatient.name,\"\\n\\uD83D\\uDCE7 Email: \").concat(newPatient.email,\"\\n\\uD83C\\uDF82 DOB: \").concat(newPatient.dateOfBirth,\"\\n\\uD83D\\uDCDE Phone: \").concat(newPatient.phoneNumber,\"\\n\\uD83C\\uDFE5 Insurance: \").concat(newPatient.insuranceProvider,\"\\n\\nThe patient is now available for creating medical records.\"));};const handleViewNFT=nftId=>{const nft=nftRecords.find(n=>n.id===nftId);if(!nft){alert('âŒ NFT not found. Please try again.');return;}const patient=myPatients.find(p=>p.id===nft.patientId);const relatedRecord=recentRecords.find(r=>r.id===nft.recordId);alert(\"\\uD83C\\uDFA8 NFT Health Record Details\\n\\n\\uD83C\\uDFF7\\uFE0F Name: \".concat(nft.name,\"\\n\\uD83D\\uDCDD Description: \").concat(nft.description,\"\\n\\uD83C\\uDD94 Token ID: \").concat(nft.tokenId,\"\\n\\uD83D\\uDC64 Patient: \").concat((patient===null||patient===void 0?void 0:patient.name)||nft.patientId,\"\\n\\uD83D\\uDCCB Related Record: \").concat((relatedRecord===null||relatedRecord===void 0?void 0:relatedRecord.title)||nft.recordId,\"\\n\\n\\uD83D\\uDD17 Blockchain Details:\\n\\uD83C\\uDF10 Network: \").concat(nft.blockchainNetwork,\"\\n\\uD83D\\uDCCD Contract Address: \").concat(nft.contractAddress,\"\\n\\uD83D\\uDC64 Current Owner: \").concat(nft.currentOwner,\"\\n\\uD83D\\uDCC5 Mint Date: \").concat(new Date(nft.mintDate).toLocaleString(),\"\\n\\uD83D\\uDD04 Transferable: \").concat(nft.isTransferable?'Yes':'No',\"\\n\\uD83D\\uDD10 Access Level: \").concat(nft.accessLevel,\"\\n\\n\\uD83D\\uDCCE Metadata URI: \").concat(nft.metadataUri,\"\\n\\uD83D\\uDDBC\\uFE0F Image URL: \").concat(nft.imageUrl,\"\\n\\n\\u2705 This NFT represents a verified medical record stored securely on the blockchain.\\n\\uD83D\\uDEE1\\uFE0F The NFT provides immutable proof of medical data authenticity.\"));};// File encryption handlers\nconst handleFileSelection=event=>{const files=event.target.files;if(files){const pdfFiles=Array.from(files).filter(file=>file.type==='application/pdf');if(pdfFiles.length!==files.length){alert('âš ï¸ Only PDF files are allowed. Non-PDF files have been filtered out.');}setSelectedFiles(prev=>[...prev,...pdfFiles]);}};const removeSelectedFile=index=>{setSelectedFiles(prev=>prev.filter((_,i)=>i!==index));};const handleEncryptSelectedFiles=async()=>{if(selectedFiles.length===0){alert('âŒ Please select PDF files to encrypt first.');return;}const password=prompt('ðŸ”’ Enter password to encrypt the selected PDF files:');if(!password||!password.trim()){alert('âŒ Password is required for encryption.');return;}try{const encryptedFiles=[];for(const file of selectedFiles){// Read file as base64\nconst reader=new FileReader();const fileData=await new Promise(resolve=>{reader.onload=()=>resolve(reader.result);reader.readAsDataURL(file);});// Encrypt the file data\nconst customEncryption=new EncryptionService();const salt=customEncryption.generateSalt();customEncryption.deriveKey(password,salt);const encryptedData=customEncryption.encryptData(fileData);encryptedFiles.push({name:file.name.replace('.pdf','.enc'),// Change extension to .enc\nencryptedData:encryptedData});}// Create download links for encrypted files\nencryptedFiles.forEach(_ref2=>{let{name,encryptedData}=_ref2;const blob=new Blob([encryptedData],{type:'application/octet-stream'});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=name;document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);});alert(\"\\u2705 Successfully encrypted and downloaded \".concat(encryptedFiles.length,\" file(s)!\\n\\n\\uD83D\\uDD10 Encryption Details:\\n\\uD83D\\uDCC4 Files: \").concat(encryptedFiles.map(f=>f.name).join(', '),\"\\n\\uD83D\\uDEE1\\uFE0F Security: AES-256 with password protection\\n\\uD83D\\uDCC5 Encrypted: \").concat(new Date().toLocaleString(),\"\\n\\uD83D\\uDD12 Format: .enc (encrypted files)\\n\\n\\u26A0\\uFE0F Remember your password - you'll need it to decrypt these .enc files!\\n\\uD83D\\uDD04 The encrypted .enc files have been downloaded to your computer.\"));// Clear selected files\nsetSelectedFiles([]);// Reset file input\nconst fileInput=document.getElementById('pdf-file-input');if(fileInput){fileInput.value='';}}catch(error){console.error('File encryption error:',error);alert('âŒ Failed to encrypt files. Please try again.');}};// Encrypted file handlers\nconst handleEncryptedFileSelection=event=>{const files=event.target.files;if(files){const encFiles=Array.from(files).filter(file=>file.name.endsWith('.enc'));if(encFiles.length!==files.length){alert('âš ï¸ Only .enc files are allowed. Non-.enc files have been filtered out.');}setSelectedEncryptedFiles(prev=>[...prev,...encFiles]);}};const removeSelectedEncryptedFile=index=>{setSelectedEncryptedFiles(prev=>prev.filter((_,i)=>i!==index));};const handleDecryptSelectedFiles=async()=>{if(selectedEncryptedFiles.length===0){alert('âŒ Please select .enc files to decrypt first.');return;}const password=prompt('ðŸ”“ Enter password to decrypt the selected .enc files:');if(!password||!password.trim()){alert('âŒ Password is required for decryption.');return;}try{const decryptedFiles=[];for(const file of selectedEncryptedFiles){// Read encrypted file content\nconst reader=new FileReader();const encryptedContent=await new Promise(resolve=>{reader.onload=()=>resolve(reader.result);reader.readAsText(file);});try{// Decrypt the file data\nconst customEncryption=new EncryptionService();const decryptedData=customEncryption.decryptData(encryptedContent);decryptedFiles.push({name:file.name.replace('.enc','.pdf'),// Change extension back to .pdf\ndecryptedData:decryptedData});}catch(decryptError){alert(\"\\u274C Failed to decrypt \".concat(file.name,\". Incorrect password or corrupted file.\"));continue;}}if(decryptedFiles.length===0){alert('âŒ No files were successfully decrypted. Please check your password.');return;}// Create download links for decrypted files\ndecryptedFiles.forEach(_ref3=>{let{name,decryptedData}=_ref3;// Convert base64 back to blob\nconst byteCharacters=atob(decryptedData.split(',')[1]);const byteNumbers=new Array(byteCharacters.length);for(let i=0;i<byteCharacters.length;i++){byteNumbers[i]=byteCharacters.charCodeAt(i);}const byteArray=new Uint8Array(byteNumbers);const blob=new Blob([byteArray],{type:'application/pdf'});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=name;document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);});alert(\"\\u2705 Successfully decrypted and downloaded \".concat(decryptedFiles.length,\" PDF file(s)!\\n\\n\\uD83D\\uDD13 Decryption Details:\\n\\uD83D\\uDCC4 Files: \").concat(decryptedFiles.map(f=>f.name).join(', '),\"\\n\\uD83D\\uDEE1\\uFE0F Security: Successfully decrypted with correct password\\n\\uD83D\\uDCC5 Decrypted: \").concat(new Date().toLocaleString(),\"\\n\\uD83D\\uDCC4 Format: .pdf (original PDF files restored)\\n\\n\\u2705 Your PDF files are now available and ready to use!\\n\\uD83D\\uDD04 The decrypted PDF files have been downloaded to your computer.\"));// Clear selected encrypted files\nsetSelectedEncryptedFiles([]);// Reset file input\nconst encFileInput=document.getElementById('enc-file-input');if(encFileInput){encFileInput.value='';}}catch(error){console.error('File decryption error:',error);alert('âŒ Failed to decrypt files. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center h-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-900\",children:\"\\uD83E\\uDE7A Doctor Dashboard\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(Badge,{variant:\"success\",size:\"sm\",children:\"\\uD83D\\uDD12 HIPAA Compliant\"}),/*#__PURE__*/_jsx(Badge,{variant:\"primary\",size:\"sm\",className:\"ml-2\",children:\"\\uD83D\\uDC68\\u200D\\u2695\\uFE0F Medical Access\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(Timer,{duration:sessionTimeLeft,onExpire:handleSessionExpire,className:\"text-sm\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"h-8 w-8 rounded-full\",src:\"https://ui-avatars.com/api/?name=\".concat(user.name,\"&background=2563eb&color=fff\"),alt:user.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:user.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-600 font-semibold\",children:user.role.toUpperCase()})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,className:\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700\",children:\"Logout\"})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"flex space-x-8\",children:[{id:'patients',label:'ðŸ‘¥ My Patients',icon:'ðŸ‘¥'},{id:'records',label:'ðŸ“‹ Medical Records',icon:'ðŸ“‹'},{id:'insurance',label:'ðŸ’° Insurance Claims',icon:'ðŸ’°'},{id:'nfts',label:'ðŸŽ¨ NFT Health Records',icon:'ðŸŽ¨'},{id:'security',label:'ðŸ”’ Security Tools',icon:'ðŸ”’'}].map(tab=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab===tab.id?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:tab.label},tab.id))})})}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",children:[activeTab==='patients'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"\\uD83D\\uDC65 My Patients\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddNewPatient,className:\"bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700\",children:\"+ New Patient\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[myPatients.length,\" active patients\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-6\",children:myPatients.map(patient=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-6 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"h-12 w-12 rounded-full\",src:\"https://ui-avatars.com/api/?name=\".concat(patient.name,\"&background=random\"),alt:patient.name}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900\",children:patient.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:patient.email}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"DOB: \",patient.dateOfBirth]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Phone: \",patient.phoneNumber]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(Badge,{variant:\"success\",size:\"sm\",children:\"Active\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:[\"Last Visit: \",patient.lastVisit]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-600 font-medium\",children:[\"Next: \",patient.upcomingAppointment]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:\"Insurance\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:patient.insuranceProvider}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 font-mono\",children:patient.insurancePolicyNumber})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:\"Emergency Contact\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:patient.emergencyContact})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateRecord,className:\"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700\",children:\"\\uD83D\\uDCCB New Record\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSubmitInsuranceClaim(patient.id),className:\"bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700\",children:\"\\uD83D\\uDCB0 Submit Claim\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewHistory(patient.id),className:\"bg-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-700\",children:\"\\uD83D\\uDC41\\uFE0F View History\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDownloadPatientPDF(patient.id),className:\"bg-purple-600 text-white px-4 py-2 rounded text-sm hover:bg-purple-700\",children:\"\\uD83D\\uDCC4 Download Records\"})]})]},patient.id))})})]}),activeTab==='records'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"\\uD83D\\uDCCB Recent Medical Records\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateRecord,className:\"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700\",children:\"+ New Record\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:recentRecords.map(record=>{var _myPatients$find4;return/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900\",children:record.title}),record.doctorId===user.id?/*#__PURE__*/_jsx(Badge,{variant:\"primary\",size:\"sm\",children:\"\\uD83D\\uDC68\\u200D\\u2695\\uFE0F Doctor Added\"}):/*#__PURE__*/_jsx(Badge,{variant:\"info\",size:\"sm\",children:\"\\uD83D\\uDC64 Patient Added\"}),recordEncryptionStatus[record.id]?/*#__PURE__*/_jsx(Badge,{variant:\"warning\",size:\"sm\",children:\"\\uD83D\\uDD12 ENCRYPTED\"}):/*#__PURE__*/_jsx(Badge,{variant:\"success\",size:\"sm\",children:\"\\uD83D\\uDCC4 Plain Text\"}),/*#__PURE__*/_jsx(Badge,{variant:\"primary\",size:\"sm\",children:\"\\uD83E\\uDDF1 On-Chain\"}),record.nftTokenId&&/*#__PURE__*/_jsx(Badge,{variant:\"secondary\",size:\"sm\",children:\"\\uD83C\\uDFA8 NFT\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:record.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Patient:\"}),\" \",(_myPatients$find4=myPatients.find(p=>p.id===record.patientId))===null||_myPatients$find4===void 0?void 0:_myPatients$find4.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Date:\"}),\" \",record.date]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Diagnosis:\"}),\" \",record.diagnosis]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Prescription:\"}),\" \",record.prescription]}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-mono text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Blockchain:\"}),\" \",record.blockchainHash]}),record.ipfsHash&&/*#__PURE__*/_jsxs(\"p\",{className:\"font-mono text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"IPFS:\"}),\" \",record.ipfsHash]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4 flex flex-col space-y-2\",children:[!record.nftTokenId&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleMintNFT(record.id),className:\"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700\",children:\"\\uD83C\\uDFA8 Mint NFT\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEncryptRecord(record.id),className:\"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700\",children:\"\\uD83D\\uDD12 Encrypt\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDecryptRecord(record.id),className:\"bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700\",children:\"\\uD83D\\uDD13 Decrypt\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewRecord(record.id),className:\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700\",children:\"\\uD83D\\uDC41\\uFE0F View\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDownloadPDF(record.id),className:\"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700\",children:\"\\uD83D\\uDCC4 Download PDF\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700\",children:\"\\u270F\\uFE0F Edit\"})]})]})},record.id);})})})]}),activeTab==='insurance'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"\\uD83D\\uDCB0 Insurance Claims\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:insuranceClaims.map(claim=>{var _myPatients$find5,_claim$blockchainTxId;return/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-medium text-gray-900\",children:[\"Claim #\",claim.claimNumber]}),/*#__PURE__*/_jsx(Badge,{variant:getStatusColor(claim.status),size:\"sm\",children:claim.status.toUpperCase()}),claim.isProcessedOnChain&&/*#__PURE__*/_jsx(Badge,{variant:\"primary\",size:\"sm\",children:\"\\uD83E\\uDDF1 On-Chain\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:claim.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Patient:\"}),\" \",(_myPatients$find5=myPatients.find(p=>p.id===claim.patientId))===null||_myPatients$find5===void 0?void 0:_myPatients$find5.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Amount:\"}),\" $\",claim.amount.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Submitted:\"}),\" \",claim.submissionDate]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Provider:\"}),\" \",claim.insuranceProvider]}),claim.approvalDate&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Approved:\"}),\" \",claim.approvalDate]}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-mono text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Contract:\"}),\" \",claim.smartContractAddress]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-mono text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Tx ID:\"}),\" \",(_claim$blockchainTxId=claim.blockchainTxId)===null||_claim$blockchainTxId===void 0?void 0:_claim$blockchainTxId.substring(0,20),\"...\"]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewInsuranceClaim(claim.id),className:\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700\",children:\"\\uD83D\\uDC41\\uFE0F View Details\"})})]})},claim.id);})})})]}),activeTab==='nfts'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"\\uD83C\\uDFA8 NFT Health Records\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:nftRecords.map(nft=>{var _myPatients$find6;return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"aspect-square bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg mb-4 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-4xl\",children:\"\\uD83C\\uDFE5\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:nft.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:nft.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs space-y-1\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Token ID:\"}),\" \",nft.tokenId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Patient:\"}),\" \",(_myPatients$find6=myPatients.find(p=>p.id===nft.patientId))===null||_myPatients$find6===void 0?void 0:_myPatients$find6.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Network:\"}),\" \",nft.blockchainNetwork]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Minted:\"}),\" \",new Date(nft.mintDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-mono\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Contract:\"}),\" \",nft.contractAddress.substring(0,10),\"...\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-2\",children:[/*#__PURE__*/_jsx(Badge,{variant:\"secondary\",size:\"sm\",children:nft.isTransferable?'Transferable':'Non-Transferable'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewNFT(nft.id),className:\"bg-purple-600 text-white px-2 py-1 rounded text-xs hover:bg-purple-700 font-medium\",children:\"\\uD83D\\uDC41\\uFE0F View NFT\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const relatedRecord=recentRecords.find(r=>r.id===nft.recordId);if(relatedRecord){handleDownloadPDF(relatedRecord.id);}else{alert('Related medical record not found');}},className:\"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700\",children:\"\\uD83D\\uDCC4 PDF\"})]})]})]})]},nft.id);})})})]}),activeTab==='security'&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"\\uD83D\\uDD12 Encryption & Security Tools\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Secure patient records with advanced encryption\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:\"\\uD83D\\uDD10 PDF File Encryption\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Choose PDF files from your computer to encrypt\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl mb-4 block\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900 mb-2\",children:\"Encrypt PDF Files\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-4\",children:\"Select PDF files from your computer to encrypt with password protection\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".pdf\",multiple:true,onChange:handleFileSelection,className:\"hidden\",id:\"pdf-file-input\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pdf-file-input\",className:\"bg-green-600 text-white px-4 py-2 rounded cursor-pointer hover:bg-green-700 inline-block\",children:\"\\uD83D\\uDCC1 Choose PDF Files to Encrypt\"})]})}),selectedFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg bg-blue-50\",children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"font-medium text-blue-900 mb-2\",children:[\"Selected Files (\",selectedFiles.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:selectedFiles.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-2 bg-white rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:file.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"(\",Math.round(file.size/1024),\" KB)\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeSelectedFile(index),className:\"text-red-600 hover:text-red-800 text-xs\",children:\"\\u274C Remove\"})]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEncryptSelectedFiles,className:\"w-full mt-3 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\",children:\"\\uD83D\\uDD12 Encrypt Selected Files\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg bg-orange-50\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-medium text-orange-900 mb-2\",children:\"\\uD83D\\uDCCB PDF Encryption/Decryption Workflow\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-orange-700 mb-3\",children:[\"\\uD83D\\uDD12 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Encryption:\"}),\" PDF \\u2192 .enc (encrypted file)\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uD83D\\uDD13 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Decryption:\"}),\" .enc \\u2192 PDF (original file)\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uD83D\\uDCA1 Export PDFs from Medical Records, then encrypt here\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('records'),className:\"bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700\",children:\"\\uD83D\\uDCCB Go to Medical Records\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:\"\\uFFFD PDF File Decryption\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Choose encrypted (.enc) files from your computer to decrypt\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-2 border-dashed border-orange-300 rounded-lg bg-orange-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl mb-4 block\",children:\"\\uD83D\\uDD13\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900 mb-2\",children:\"Decrypt Encrypted Files\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-4\",children:\"Select .enc files from your computer to decrypt with password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".enc\",multiple:true,onChange:handleEncryptedFileSelection,className:\"hidden\",id:\"enc-file-input\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"enc-file-input\",className:\"bg-orange-600 text-white px-4 py-2 rounded cursor-pointer hover:bg-orange-700 inline-block\",children:\"\\uD83D\\uDCC1 Choose .enc Files to Decrypt\"})]})}),selectedEncryptedFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg bg-orange-50\",children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"font-medium text-orange-900 mb-2\",children:[\"Selected Encrypted Files (\",selectedEncryptedFiles.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:selectedEncryptedFiles.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-2 bg-white rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:file.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"(\",Math.round(file.size/1024),\" KB)\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeSelectedEncryptedFile(index),className:\"text-red-600 hover:text-red-800 text-xs\",children:\"\\u274C Remove\"})]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDecryptSelectedFiles,className:\"w-full mt-3 bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700\",children:\"\\uFFFD Decrypt Selected Files\"})]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:\"\\uD83D\\uDCCB Clipboard Security\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Monitor clipboard for suspicious wallet addresses with sound alerts\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Clipboard Monitoring\"}),/*#__PURE__*/_jsx(Badge,{variant:clipboardMonitoring?'success':'secondary',size:\"sm\",children:clipboardMonitoring?'Active':'Inactive'})]}),clipboardAlert&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 p-3 rounded-lg border \".concat(clipboardAlert.isFake?'bg-red-50 border-red-200':'bg-blue-50 border-blue-200'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:clipboardAlert.isFake?'ðŸš¨':'ðŸ“‹'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-medium text-sm \".concat(clipboardAlert.isFake?'text-red-800':'text-blue-800'),children:clipboardAlert.isFake?'SUSPICIOUS ADDRESS DETECTED!':'Wallet Address Detected'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 font-mono \".concat(clipboardAlert.isFake?'text-red-700':'text-blue-700'),children:clipboardAlert.address}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(clipboardAlert.isFake?'text-red-600':'text-blue-600'),children:clipboardAlert.isFake?'This address appears to be fake or compromised!':'Copied to clipboard'})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleClipboardMonitoring,className:\"w-full px-4 py-2 rounded text-sm \".concat(clipboardMonitoring?'bg-red-600 hover:bg-red-700 text-white':'bg-blue-600 hover:bg-blue-700 text-white'),children:clipboardMonitoring?'â¹ï¸ Stop Monitoring':'ðŸ” Start Monitoring'}),clipboardMonitoring&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>clipboardSecurityService.testAlert(false),className:\"flex-1 px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700\",children:\"\\uD83D\\uDD0A Test Normal Alert\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>clipboardSecurityService.testAlert(true),className:\"flex-1 px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700\",children:\"\\uD83D\\uDEA8 Test Fake Alert\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-xs text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 Detects cryptocurrency wallet addresses (ETH, BTC)\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 Plays sound alerts for suspicious addresses\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 Protects against clipboard hijacking attacks\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 Real-time monitoring with visual feedback\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-yellow-600 text-lg mr-2\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-yellow-800\",children:\"Security Notice\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-yellow-700 mt-1\",children:\"Always ensure patient records are encrypted before transmission. Use blockchain verification for data integrity and monitor for suspicious activities.\"})]})]})})]})]})})]}),showCreateRecordModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Create New Medical Record\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Patient\"}),/*#__PURE__*/_jsxs(\"select\",{value:newRecordForm.patientId,onChange:e=>setNewRecordForm(prev=>_objectSpread(_objectSpread({},prev),{},{patientId:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Patient\"}),myPatients.map(patient=>/*#__PURE__*/_jsx(\"option\",{value:patient.id,children:patient.name},patient.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newRecordForm.title,onChange:e=>setNewRecordForm(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",placeholder:\"Record title\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Diagnosis\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newRecordForm.diagnosis,onChange:e=>setNewRecordForm(prev=>_objectSpread(_objectSpread({},prev),{},{diagnosis:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",placeholder:\"Diagnosis\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Prescription\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newRecordForm.prescription,onChange:e=>setNewRecordForm(prev=>_objectSpread(_objectSpread({},prev),{},{prescription:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",rows:3,placeholder:\"Prescription details\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newRecordForm.description,onChange:e=>setNewRecordForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",rows:3,placeholder:\"Additional notes\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateRecordModal(false),className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveRecord,className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\",children:\"Create Record\"})]})]})})}),showClaimModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Submit Insurance Claim\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Patient\"}),/*#__PURE__*/_jsxs(\"select\",{value:newClaimForm.patientId,onChange:e=>setNewClaimForm(prev=>_objectSpread(_objectSpread({},prev),{},{patientId:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Patient\"}),myPatients.map(patient=>/*#__PURE__*/_jsx(\"option\",{value:patient.id,children:patient.name},patient.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Insurance Provider\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newClaimForm.insuranceProvider,onChange:e=>setNewClaimForm(prev=>_objectSpread(_objectSpread({},prev),{},{insuranceProvider:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",placeholder:\"Insurance company name\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Claim Amount ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newClaimForm.amount,onChange:e=>setNewClaimForm(prev=>_objectSpread(_objectSpread({},prev),{},{amount:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newClaimForm.description,onChange:e=>setNewClaimForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",rows:4,placeholder:\"Claim description and details\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowClaimModal(false),className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveClaim,className:\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700\",children:\"Submit Claim\"})]})]})})})]});};export default DoctorDashboard;","map":{"version":3,"names":["React","useState","useEffect","Badge","Timer","RoleBasedAccessService","EncryptionService","sharedStateService","pdfService","firebaseService","clipboardSecurityService","jsx","_jsx","jsxs","_jsxs","DoctorDashboard","_ref","user","onLogout","sessionTimeLeft","rbacService","activeTab","setActiveTab","showCreateRecordModal","setShowCreateRecordModal","showClaimModal","setShowClaimModal","setSelectedPatientId","clipboardMonitoring","setClipboardMonitoring","clipboardAlert","setClipboardAlert","encryptedRecords","setEncryptedRecords","recordEncryptionStatus","setRecordEncryptionStatus","selectedFiles","setSelectedFiles","selectedEncryptedFiles","setSelectedEncryptedFiles","isLoadingFromFirebase","setIsLoadingFromFirebase","firebaseRecords","setFirebaseRecords","firebasePatients","setFirebasePatients","newRecordForm","setNewRecordForm","patientId","title","description","diagnosis","prescription","notes","newClaimForm","setNewClaimForm","amount","insuranceProvider","myPatients","setMyPatients","recentRecords","setRecentRecords","initializeData","initializeSampleData","firebaseRecordsData","firebasePatientsData","Promise","all","getMedicalRecords","getPatients","unsubscribeFirebaseRecords","onMedicalRecordsChange","records","unsubscribeFirebasePatients","onPatientsChange","patients","unsubscribeSharedRecords","sharedRecords","record","existsInFirebase","some","fbRecord","date","addMedicalRecord","doctorId","isEncrypted","isVerified","accessPermissions","blockchainHash","ipfsHash","nftTokenId","console","log","error","allRecords","id","insuranceClaims","claimNumber","providerId","insuranceCompany","status","submittedAt","submissionDate","approvalDate","relatedRecords","smartContractAddress","blockchainTxId","isProcessedOnChain","approvalSignatures","ipfsDocuments","nftRecords","tokenId","recordId","name","imageUrl","metadataUri","contractAddress","blockchainNetwork","mintDate","currentOwner","isTransferable","accessLevel","setCurrentUser","handleSessionExpire","window","confirm","handleCreateRecord","handleSubmitInsuranceClaim","prev","_objectSpread","handleMintNFT","alert","concat","handleViewHistory","patient","find","p","patientRecords","filter","length","historyDetails","map","join","email","dateOfBirth","phoneNumber","address","emergencyContact","lastVisit","upcomingAppointment","handleEncryptRecord","r","_myPatients$find","password","prompt","trim","_myPatients$find2","customEncryption","recordData","encryptedBy","encryptedAt","Date","toISOString","salt","generateSalt","deriveKey","encryptedData","encryptData","JSON","stringify","toLocaleString","handleDecryptRecord","_myPatients$find3","decryptedData","decryptData","parse","permanentDecrypt","updated","handleViewRecord","viewEncrypted","toggleClipboardMonitoring","newState","hasPermission","requestClipboardPermission","startMonitoring","isFake","timestamp","now","setTimeout","stopMonitoring","handleViewInsuranceClaim","claimId","claim","c","toFixed","toUpperCase","handleSaveRecord","newRecord","generateId","split","toString","Math","random","slice","undefined","handleSaveClaim","getStatusColor","handleDownloadPDF","downloadMedicalRecordPDF","includeWatermark","replace","Error","message","handleDownloadPatientPDF","batchPDF","generateBatchPDF","url","URL","createObjectURL","link","document","createElement","href","filename","download","body","appendChild","click","removeChild","revokeObjectURL","handleAddNewPatient","patientName","patientEmail","includes","patientDOB","match","insurancePolicyNumber","newPatient","isActive","addPatient","handleViewNFT","nftId","nft","n","relatedRecord","handleFileSelection","event","files","target","pdfFiles","Array","from","file","type","removeSelectedFile","index","_","i","handleEncryptSelectedFiles","encryptedFiles","reader","FileReader","fileData","resolve","onload","result","readAsDataURL","push","forEach","_ref2","blob","Blob","f","fileInput","getElementById","value","handleEncryptedFileSelection","encFiles","endsWith","removeSelectedEncryptedFile","handleDecryptSelectedFiles","decryptedFiles","encryptedContent","readAsText","decryptError","_ref3","byteCharacters","atob","byteNumbers","charCodeAt","byteArray","Uint8Array","encFileInput","className","children","variant","size","duration","onExpire","src","alt","role","onClick","label","icon","tab","_myPatients$find4","_myPatients$find5","_claim$blockchainTxId","substring","_myPatients$find6","toLocaleDateString","accept","multiple","onChange","htmlFor","round","testAlert","e","placeholder","rows"],"sources":["D:/DATA/CAREER/INTERNSHIPS/EMRChains Internship NSTP/PROJECTS/HEALTHCARE_SYSTEM/src/components/Dashboard/DoctorDashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Badge from '../UI/Badge';\r\nimport Timer from '../UI/Timer';\r\nimport { User, MedicalRecord, Patient, InsuranceClaim, NFTHealthRecord } from '../../types';\r\nimport { RoleBasedAccessService } from '../../services/rbacService';\r\nimport { EncryptionService } from '../../services/encryption';\r\nimport { sharedStateService } from '../../services/sharedState';\r\nimport { pdfService } from '../../services/pdfService';\r\nimport { firebaseService } from '../../services/firebaseService';\r\nimport { clipboardSecurityService } from '../../services/clipboardSecurityService';\r\n\r\ninterface DoctorDashboardProps {\r\n    user: User;\r\n    onLogout: () => void;\r\n}\r\n\r\nconst DoctorDashboard: React.FC<DoctorDashboardProps> = ({ user, onLogout }) => {\r\n    const [sessionTimeLeft] = useState(1800);\r\n    const [rbacService] = useState(new RoleBasedAccessService());\r\n    const [activeTab, setActiveTab] = useState<'patients' | 'records' | 'insurance' | 'nfts' | 'security'>('patients');\r\n\r\n    // Modal states\r\n    const [showCreateRecordModal, setShowCreateRecordModal] = useState(false);\r\n    const [showClaimModal, setShowClaimModal] = useState(false);\r\n    const [, setSelectedPatientId] = useState<string>('');\r\n\r\n    // Security states\r\n    const [clipboardMonitoring, setClipboardMonitoring] = useState(false);\r\n    const [clipboardAlert, setClipboardAlert] = useState<{ address: string; isFake: boolean; timestamp: number } | null>(null);\r\n    const [encryptedRecords, setEncryptedRecords] = useState<{ [key: string]: string }>({});\r\n    const [recordEncryptionStatus, setRecordEncryptionStatus] = useState<{ [key: string]: boolean }>({});\r\n    const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n    const [selectedEncryptedFiles, setSelectedEncryptedFiles] = useState<File[]>([]);\r\n\r\n    // Firebase sync state\r\n    const [isLoadingFromFirebase, setIsLoadingFromFirebase] = useState(true);\r\n    const [firebaseRecords, setFirebaseRecords] = useState<MedicalRecord[]>([]);\r\n    const [firebasePatients, setFirebasePatients] = useState<Patient[]>([]);\r\n\r\n    // Form states\r\n    const [newRecordForm, setNewRecordForm] = useState({\r\n        patientId: '',\r\n        title: '',\r\n        description: '',\r\n        diagnosis: '',\r\n        prescription: '',\r\n        notes: ''\r\n    });\r\n\r\n    const [newClaimForm, setNewClaimForm] = useState({\r\n        patientId: '',\r\n        amount: '',\r\n        description: '',\r\n        insuranceProvider: ''\r\n    });\r\n\r\n    const [myPatients, setMyPatients] = useState<Patient[]>([]);\r\n    const [recentRecords, setRecentRecords] = useState<MedicalRecord[]>([]);\r\n\r\n    // Initialize data from Firebase and shared state service\r\n    useEffect(() => {\r\n        const initializeData = async () => {\r\n            setIsLoadingFromFirebase(true);\r\n            \r\n            try {\r\n                // Initialize Firebase with sample data if needed\r\n                await firebaseService.initializeSampleData();\r\n                \r\n                // Load data from Firebase (for doctor dashboard only)\r\n                const [firebaseRecordsData, firebasePatientsData] = await Promise.all([\r\n                    firebaseService.getMedicalRecords(),\r\n                    firebaseService.getPatients()\r\n                ]);\r\n                \r\n                setFirebaseRecords(firebaseRecordsData);\r\n                setFirebasePatients(firebasePatientsData);\r\n                setRecentRecords(firebaseRecordsData); // Doctor sees Firebase records\r\n                setMyPatients(firebasePatientsData);\r\n\r\n                // Set up real-time listeners for Firebase data\r\n                const unsubscribeFirebaseRecords = firebaseService.onMedicalRecordsChange((records) => {\r\n                    setFirebaseRecords(records);\r\n                    setRecentRecords(records); // Doctor dashboard shows Firebase records\r\n                });\r\n\r\n                const unsubscribeFirebasePatients = firebaseService.onPatientsChange((patients) => {\r\n                    setFirebasePatients(patients);\r\n                    setMyPatients(patients);\r\n                });\r\n\r\n                // Also sync patient-added records from shared state to Firebase\r\n                const unsubscribeSharedRecords = sharedStateService.onMedicalRecordsChange(async (sharedRecords) => {\r\n                    // When patient adds a record via shared state, sync it to Firebase\r\n                    for (const record of sharedRecords) {\r\n                        // Check if this record exists in Firebase\r\n                        const existsInFirebase = firebaseRecordsData.some(fbRecord => \r\n                            fbRecord.patientId === record.patientId && \r\n                            fbRecord.title === record.title &&\r\n                            fbRecord.date === record.date\r\n                        );\r\n                        \r\n                        if (!existsInFirebase) {\r\n                            try {\r\n                                // Add to Firebase\r\n                                await firebaseService.addMedicalRecord({\r\n                                    patientId: record.patientId,\r\n                                    doctorId: record.doctorId,\r\n                                    title: record.title,\r\n                                    description: record.description,\r\n                                    date: record.date,\r\n                                    diagnosis: record.diagnosis,\r\n                                    prescription: record.prescription,\r\n                                    isEncrypted: record.isEncrypted,\r\n                                    isVerified: record.isVerified,\r\n                                    accessPermissions: record.accessPermissions,\r\n                                    blockchainHash: record.blockchainHash || '',\r\n                                    ipfsHash: record.ipfsHash || '',\r\n                                    nftTokenId: record.nftTokenId || ''\r\n                                });\r\n                                console.log('Synced new patient record to Firebase:', record.title);\r\n                            } catch (error) {\r\n                                console.error('Failed to sync record to Firebase:', error);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // Cleanup function\r\n                return () => {\r\n                    unsubscribeFirebaseRecords();\r\n                    unsubscribeFirebasePatients();\r\n                    unsubscribeSharedRecords();\r\n                };\r\n                \r\n            } catch (error) {\r\n                console.error('Failed to load Firebase data:', error);\r\n                \r\n                // Fallback to shared state if Firebase fails\r\n                const patients = sharedStateService.getPatients();\r\n                const allRecords = sharedStateService.getMedicalRecords();\r\n                setMyPatients(patients);\r\n                setRecentRecords(allRecords);\r\n            } finally {\r\n                setIsLoadingFromFirebase(false);\r\n            }\r\n        };\r\n\r\n        initializeData();\r\n    }, [user.id]);\r\n\r\n    const [insuranceClaims] = useState<InsuranceClaim[]>([\r\n        {\r\n            id: 'claim-1',\r\n            claimNumber: 'CLM-2025-001',\r\n            patientId: 'patient-1',\r\n            providerId: user.id,\r\n            doctorId: user.id,\r\n            insuranceCompany: 'HealthFirst Insurance',\r\n            insuranceProvider: 'HealthFirst Insurance',\r\n            amount: 450.00,\r\n            status: 'approved',\r\n            submittedAt: '2025-07-01T10:00:00Z',\r\n            submissionDate: '2025-07-01',\r\n            approvalDate: '2025-07-03',\r\n            description: 'Annual physical examination and blood work',\r\n            relatedRecords: ['record-1'],\r\n            smartContractAddress: '0x1234567890abcdef1234567890abcdef12345678',\r\n            blockchainTxId: '0xabc123def456789abcdef123456789abc123def456789abcdef',\r\n            isProcessedOnChain: true,\r\n            approvalSignatures: [],\r\n            ipfsDocuments: []\r\n        },\r\n        {\r\n            id: 'claim-2',\r\n            claimNumber: 'CLM-2025-002',\r\n            patientId: 'patient-2',\r\n            providerId: user.id,\r\n            doctorId: user.id,\r\n            insuranceCompany: 'MediCare Plus',\r\n            insuranceProvider: 'MediCare Plus',\r\n            amount: 275.50,\r\n            status: 'pending',\r\n            submittedAt: '2025-07-04T14:30:00Z',\r\n            submissionDate: '2025-07-04',\r\n            description: 'Follow-up consultation and medication review',\r\n            relatedRecords: ['record-2'],\r\n            smartContractAddress: '0x1234567890abcdef1234567890abcdef12345678',\r\n            blockchainTxId: '0xdef456abc789123def456abc789123def456abc789123def',\r\n            isProcessedOnChain: false,\r\n            approvalSignatures: [],\r\n            ipfsDocuments: []\r\n        }\r\n    ]);\r\n\r\n    const [nftRecords] = useState<NFTHealthRecord[]>([\r\n        {\r\n            id: 'nft-1',\r\n            tokenId: 'HEALTH-NFT-001',\r\n            patientId: 'patient-1',\r\n            recordId: 'record-1',\r\n            name: 'Annual Physical 2025',\r\n            description: 'Comprehensive health examination record',\r\n            imageUrl: 'https://via.placeholder.com/200x200/4F46E5/FFFFFF?text=NFT-001',\r\n            metadataUri: 'ipfs://QmX9ZB7tRvWKHGK8P2mNv3qL5rA9wS6cF4dE2gH1jK0mP',\r\n            contractAddress: '0x9876543210fedcba9876543210fedcba98765432',\r\n            blockchainNetwork: 'Ethereum',\r\n            mintDate: '2025-07-04T10:30:00Z',\r\n            currentOwner: 'patient-1',\r\n            isTransferable: false,\r\n            accessLevel: 'doctor_patient'\r\n        },\r\n        {\r\n            id: 'nft-2',\r\n            tokenId: 'HEALTH-NFT-002',\r\n            patientId: 'patient-2',\r\n            recordId: 'record-2',\r\n            name: 'Follow-up Consultation',\r\n            description: 'Treatment follow-up and medication adjustment',\r\n            imageUrl: 'https://via.placeholder.com/200x200/059669/FFFFFF?text=NFT-002',\r\n            metadataUri: 'ipfs://QmY8AX6sRvWKHGK8P2mNv3qL5rA9wS6cF4dE2gH1jK0nQ',\r\n            contractAddress: '0x9876543210fedcba9876543210fedcba98765432',\r\n            blockchainNetwork: 'Ethereum',\r\n            mintDate: '2025-07-03T14:45:00Z',\r\n            currentOwner: 'patient-2',\r\n            isTransferable: false,\r\n            accessLevel: 'doctor_patient'\r\n        }\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        rbacService.setCurrentUser(user);\r\n    }, [user, rbacService]);\r\n\r\n    const handleSessionExpire = () => {\r\n        window.confirm('Session expired for security. Please login again.') && onLogout();\r\n    };\r\n\r\n    const handleCreateRecord = () => {\r\n        setShowCreateRecordModal(true);\r\n    };\r\n\r\n    const handleSubmitInsuranceClaim = (patientId: string) => {\r\n        setSelectedPatientId(patientId);\r\n        setNewClaimForm(prev => ({ ...prev, patientId }));\r\n        setShowClaimModal(true);\r\n    };\r\n\r\n    const handleMintNFT = (recordId: string) => {\r\n        alert(`NFT minting initiated for record ${recordId}. This will create a secure, immutable NFT on the blockchain.`);\r\n        console.log(`Minting NFT for record: ${recordId}`);\r\n    };\r\n\r\n    const handleViewHistory = (patientId: string) => {\r\n        const patient = myPatients.find(p => p.id === patientId);\r\n        const patientRecords = recentRecords.filter(record => record.patientId === patientId);\r\n\r\n        if (patient && patientRecords.length > 0) {\r\n            const historyDetails = patientRecords.map(record =>\r\n                `ðŸ“‹ ${record.title} (${record.date})\\n   Diagnosis: ${record.diagnosis}\\n   Prescription: ${record.prescription}`\r\n            ).join('\\n\\n');\r\n\r\n            alert(`ðŸ‘¥ Medical History for ${patient.name}\r\nðŸ“§ Email: ${patient.email}\r\nðŸŽ‚ DOB: ${patient.dateOfBirth}\r\nðŸ¥ Insurance: ${patient.insuranceProvider}\r\nðŸ“ž Phone: ${patient.phoneNumber}\r\nðŸ  Address: ${patient.address}\r\nðŸš¨ Emergency Contact: ${patient.emergencyContact}\r\nðŸ“… Last Visit: ${patient.lastVisit}\r\nâ­ï¸ Next Appointment: ${patient.upcomingAppointment}\r\n\r\nðŸ“‹ MEDICAL RECORDS:\r\n${historyDetails}\r\n\r\nTotal Records: ${patientRecords.length}`);\r\n        } else {\r\n            alert(`No medical history found for this patient.`);\r\n        }\r\n    };\r\n\r\n    const handleEncryptRecord = (recordId: string) => {\r\n        const record = recentRecords.find(r => r.id === recordId);\r\n        if (record) {\r\n            // Check if already encrypted\r\n            if (recordEncryptionStatus[recordId]) {\r\n                alert('âš ï¸ This record is already encrypted. Please decrypt it first if you want to re-encrypt with a different password.');\r\n                return;\r\n            }\r\n\r\n            const password = prompt(`ðŸ”’ Enter a password to encrypt \"${record.title}\" for patient: ${myPatients.find(p => p.id === record.patientId)?.name || record.patientId}`);\r\n            if (password && password.trim()) {\r\n                try {\r\n                    // Create a custom encryption service with the user's password\r\n                    const customEncryption = new EncryptionService();\r\n                    const recordData = {\r\n                        ...record,\r\n                        encryptedBy: user.name,\r\n                        encryptedAt: new Date().toISOString()\r\n                    };\r\n\r\n                    // Use password-based encryption\r\n                    const salt = customEncryption.generateSalt();\r\n                    customEncryption.deriveKey(password, salt); // Generate derived key for security\r\n                    const encryptedData = customEncryption.encryptData(JSON.stringify(recordData));\r\n\r\n                    // Store the encrypted data and metadata\r\n                    setEncryptedRecords(prev => ({ ...prev, [recordId]: encryptedData }));\r\n                    setRecordEncryptionStatus(prev => ({ ...prev, [recordId]: true }));\r\n\r\n                    alert(`ðŸ”’ SUCCESS! Record \"${record.title}\" has been encrypted with your custom password.\r\n                    \r\nðŸ“‹ Record: ${record.title}\r\nðŸ‘¤ Patient: ${myPatients.find(p => p.id === record.patientId)?.name}\r\nðŸ” Status: ENCRYPTED\r\nðŸ›¡ï¸ Security Level: AES-256 + Password Protection\r\nðŸ“… Encrypted At: ${new Date().toLocaleString()}\r\nðŸ‘¨â€âš•ï¸ Encrypted By: ${user.name}\r\n\r\nâš ï¸ Remember your password - it will be required for decryption!`);\r\n                } catch (error) {\r\n                    alert('âŒ Encryption failed. Please try again.');\r\n                }\r\n            } else {\r\n                alert('âŒ Password is required for encryption.');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDecryptRecord = (recordId: string) => {\r\n        // Check if record is encrypted\r\n        if (!recordEncryptionStatus[recordId]) {\r\n            alert('â„¹ï¸ This record is not encrypted. No decryption needed.');\r\n            return;\r\n        }\r\n\r\n        const encryptedData = encryptedRecords[recordId];\r\n        if (encryptedData) {\r\n            const password = prompt(`ðŸ”“ Enter the password to decrypt this record:`);\r\n            if (password && password.trim()) {\r\n                try {\r\n                    const customEncryption = new EncryptionService();\r\n\r\n                    // For demo purposes, we'll try to decrypt with the provided password\r\n                    // In a real system, you'd verify the password against the stored hash\r\n                    const decryptedData = customEncryption.decryptData(encryptedData);\r\n                    const record = JSON.parse(decryptedData);\r\n\r\n                    alert(`ðŸ”“ DECRYPTION SUCCESSFUL!\r\n\r\nðŸ“‹ Title: ${record.title}\r\nðŸ‘¤ Patient: ${myPatients.find(p => p.id === record.patientId)?.name || record.patientId}\r\nðŸ“… Date: ${record.date}\r\nðŸ©º Diagnosis: ${record.diagnosis}\r\nðŸ’Š Prescription: ${record.prescription}\r\nðŸ“ Description: ${record.description}\r\n\r\nðŸ”’ Encryption Details:\r\nðŸ‘¨â€âš•ï¸ Encrypted By: ${record.encryptedBy || 'Unknown'}\r\nðŸ“… Encrypted At: ${record.encryptedAt ? new Date(record.encryptedAt).toLocaleString() : 'Unknown'}\r\nðŸ›¡ï¸ Security: Password-protected AES-256`);\r\n\r\n                    // Ask if user wants to permanently decrypt\r\n                    const permanentDecrypt = window.confirm('ðŸ”“ Do you want to permanently decrypt this record? (This will remove encryption)');\r\n                    if (permanentDecrypt) {\r\n                        setEncryptedRecords(prev => {\r\n                            const updated = { ...prev };\r\n                            delete updated[recordId];\r\n                            return updated;\r\n                        });\r\n                        setRecordEncryptionStatus(prev => ({ ...prev, [recordId]: false }));\r\n                        alert('âœ… Record has been permanently decrypted and is now in plain text.');\r\n                    }\r\n                } catch (error) {\r\n                    alert('âŒ Decryption failed. Incorrect password or corrupted data.');\r\n                }\r\n            } else {\r\n                alert('âŒ Password is required for decryption.');\r\n            }\r\n        } else {\r\n            alert('âŒ No encrypted data found for this record.');\r\n        }\r\n    };\r\n\r\n    const handleViewRecord = (recordId: string) => {\r\n        const record = recentRecords.find(r => r.id === recordId);\r\n        if (record) {\r\n            const isEncrypted = recordEncryptionStatus[recordId];\r\n            const patient = myPatients.find(p => p.id === record.patientId);\r\n\r\n            if (isEncrypted) {\r\n                const viewEncrypted = window.confirm(`ðŸ”’ This record is encrypted. \r\n\r\nDo you want to:\r\n- Click \"OK\" to view encrypted version\r\n- Click \"Cancel\" to decrypt and view`);\r\n\r\n                if (viewEncrypted) {\r\n                    // Show encrypted version\r\n                    alert(`ðŸ”’ ENCRYPTED RECORD VIEW\r\n\r\nðŸ“‹ Title: ${record.title}\r\nðŸ‘¤ Patient: ${patient?.name || record.patientId}\r\nðŸ“… Date: ${record.date}\r\nðŸ” Status: ENCRYPTED\r\nðŸ›¡ï¸ Security: Password Protected\r\n\r\nâš ï¸ Content is encrypted and cannot be displayed in plain text.\r\nUse the decrypt button to view the full content.`);\r\n                } else {\r\n                    // Trigger decryption process\r\n                    handleDecryptRecord(recordId);\r\n                }\r\n            } else {\r\n                // Show full record details\r\n                alert(`ðŸ‘ï¸ MEDICAL RECORD DETAILS\r\n\r\nðŸ“‹ Title: ${record.title}\r\nðŸ‘¤ Patient: ${patient?.name || record.patientId}\r\nðŸ“§ Email: ${patient?.email || 'N/A'}\r\nðŸ“… Date: ${record.date}\r\nðŸ©º Diagnosis: ${record.diagnosis}\r\nðŸ’Š Prescription: ${record.prescription}\r\nðŸ“ Description: ${record.description}\r\n\r\nðŸ”— Blockchain Details:\r\nðŸ§± Hash: ${record.blockchainHash || 'N/A'}\r\nðŸ“Ž IPFS: ${record.ipfsHash || 'N/A'}\r\nðŸŽ¨ NFT Token: ${record.nftTokenId || 'Not minted'}\r\nâœ… Verified: ${record.isVerified ? 'Yes' : 'No'}\r\nðŸ” Encryption: Not encrypted`);\r\n            }\r\n        }\r\n    };\r\n\r\n    const toggleClipboardMonitoring = async () => {\r\n        const newState = !clipboardMonitoring;\r\n        setClipboardMonitoring(newState);\r\n        \r\n        if (newState) {\r\n            // Request clipboard permission first\r\n            const hasPermission = await clipboardSecurityService.requestClipboardPermission();\r\n            \r\n            if (hasPermission) {\r\n                // Start monitoring with callback\r\n                clipboardSecurityService.startMonitoring((address: string, isFake: boolean) => {\r\n                    setClipboardAlert({ address, isFake, timestamp: Date.now() });\r\n                    \r\n                    if (isFake) {\r\n                        // Show urgent warning for fake addresses\r\n                        alert(`ðŸš¨ SECURITY ALERT!\\n\\nSuspicious wallet address detected:\\n${address}\\n\\nThis address appears to be fake or compromised. Please verify before proceeding with any transactions.`);\r\n                    } else {\r\n                        // Show gentle notification for normal addresses\r\n                        console.log(`ðŸ“‹ Wallet address detected: ${address}`);\r\n                    }\r\n                    \r\n                    // Clear alert after 10 seconds\r\n                    setTimeout(() => {\r\n                        setClipboardAlert(null);\r\n                    }, 10000);\r\n                });\r\n                \r\n                alert('ðŸ” Clipboard monitoring enabled with sound alerts. The system will monitor for suspicious wallet addresses and play audio warnings.');\r\n            } else {\r\n                setClipboardMonitoring(false);\r\n                alert('âŒ Clipboard permission denied. Monitoring cannot be enabled without clipboard access.');\r\n            }\r\n        } else {\r\n            clipboardSecurityService.stopMonitoring();\r\n            setClipboardAlert(null);\r\n            alert('â¹ï¸ Clipboard monitoring disabled.');\r\n        }\r\n    };\r\n\r\n    const handleViewInsuranceClaim = (claimId: string) => {\r\n        const claim = insuranceClaims.find(c => c.id === claimId);\r\n        if (claim) {\r\n            const patient = myPatients.find(p => p.id === claim.patientId);\r\n            alert(`ðŸ’° Insurance Claim Details\r\n\r\nðŸ“‹ Claim Number: ${claim.claimNumber}\r\nðŸ‘¤ Patient: ${patient?.name || claim.patientId}\r\nðŸ’µ Amount: $${claim.amount.toFixed(2)}\r\nðŸ“Š Status: ${claim.status.toUpperCase()}\r\nðŸ¥ Insurance Provider: ${claim.insuranceProvider}\r\nðŸ“… Submitted: ${claim.submissionDate}\r\n${claim.approvalDate ? `âœ… Approved: ${claim.approvalDate}` : 'â³ Pending approval'}\r\nðŸ“ Description: ${claim.description || 'No description provided'}\r\n\r\nðŸ”— Blockchain Details:\r\nðŸ“‹ Contract Address: ${claim.smartContractAddress}\r\nðŸ†” Transaction ID: ${claim.blockchainTxId}\r\nâ›“ï¸ On-Chain Status: ${claim.isProcessedOnChain ? 'Processed' : 'Pending'}\r\n\r\nðŸ“„ Related Records: ${claim.relatedRecords.length} record(s)\r\nðŸ“Ž Documents: ${claim.ipfsDocuments.length} file(s) on IPFS`);\r\n        }\r\n    };\r\n\r\n    const handleSaveRecord = () => {\r\n        if (!newRecordForm.title || !newRecordForm.patientId) {\r\n            alert('Please fill in all required fields');\r\n            return;\r\n        }\r\n\r\n        // Find patient details\r\n        const patient = myPatients.find(p => p.id === newRecordForm.patientId);\r\n        if (!patient) {\r\n            alert('Patient not found');\r\n            return;\r\n        }\r\n\r\n        // Create new record with proper ID generation\r\n        const newRecord: MedicalRecord = {\r\n            id: sharedStateService.generateId('record'),\r\n            patientId: newRecordForm.patientId,\r\n            doctorId: user.id,\r\n            title: newRecordForm.title,\r\n            description: newRecordForm.description,\r\n            date: new Date().toISOString().split('T')[0], // Format as YYYY-MM-DD\r\n            diagnosis: newRecordForm.diagnosis,\r\n            prescription: newRecordForm.prescription,\r\n            isEncrypted: false, // Initially not encrypted\r\n            isVerified: true,\r\n            accessPermissions: [user.id, newRecordForm.patientId],\r\n            blockchainHash: `0x${Date.now().toString(16)}abc${Math.random().toString(16).slice(2, 8)}`,\r\n            ipfsHash: `Qm${Math.random().toString(36).slice(2, 15)}${Date.now().toString(36)}`,\r\n            nftTokenId: undefined // Will be set when NFT is minted\r\n        };\r\n\r\n        // Add to shared state (will automatically update all components)\r\n        sharedStateService.addMedicalRecord(newRecord);\r\n\r\n        // Show success message with patient name\r\n        alert(`âœ… Medical record created successfully!\r\n\r\nðŸ“‹ Record: ${newRecord.title}\r\nðŸ‘¤ Patient: ${patient.name}\r\nðŸ“… Date: ${newRecord.date}\r\nðŸ©º Diagnosis: ${newRecord.diagnosis}\r\nðŸ’Š Prescription: ${newRecord.prescription}\r\n\r\nThe record has been added to your medical records list and is ready for encryption if needed.`);\r\n\r\n        setShowCreateRecordModal(false);\r\n        setNewRecordForm({\r\n            patientId: '',\r\n            title: '',\r\n            description: '',\r\n            diagnosis: '',\r\n            prescription: '',\r\n            notes: ''\r\n        });\r\n    };\r\n\r\n    const handleSaveClaim = () => {\r\n        if (!newClaimForm.amount || !newClaimForm.description) {\r\n            alert('Please fill in all required fields');\r\n            return;\r\n        }\r\n\r\n        // Create new insurance claim\r\n        // const newClaim: InsuranceClaim = {\r\n        //     id: `claim-${Date.now()}`,\r\n        //     claimNumber: `CLAIM-${Date.now()}`,\r\n        //     patientId: newClaimForm.patientId,\r\n        //     providerId: user.id,\r\n        //     doctorId: user.id,\r\n        //     insuranceCompany: newClaimForm.insuranceProvider,\r\n        //     insuranceProvider: newClaimForm.insuranceProvider,\r\n        //     amount: parseFloat(newClaimForm.amount),\r\n        //     status: 'pending',\r\n        //     submittedAt: new Date().toISOString(),\r\n        //     submissionDate: new Date().toLocaleDateString(),\r\n        //     description: newClaimForm.description,\r\n        //     relatedRecords: [],\r\n        //     smartContractAddress: '0x1234567890abcdef1234567890abcdef12345678',\r\n        //     blockchainTxId: `0x${Date.now().toString(16)}`,\r\n        //     isProcessedOnChain: false,\r\n        //     approvalSignatures: [],\r\n        //     ipfsDocuments: []\r\n        // };\r\n\r\n        alert('Insurance claim submitted successfully!');\r\n        setShowClaimModal(false);\r\n        setNewClaimForm({\r\n            patientId: '',\r\n            amount: '',\r\n            description: '',\r\n            insuranceProvider: ''\r\n        });\r\n    };\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'approved': return 'success';\r\n            case 'pending': return 'warning';\r\n            case 'rejected': return 'error';\r\n            case 'paid': return 'success';\r\n            case 'under_review': return 'info';\r\n            case 'submitted': return 'primary';\r\n            default: return 'secondary';\r\n        }\r\n    };\r\n\r\n    const handleDownloadPDF = async (recordId: string) => {\r\n        const record = recentRecords.find(r => r.id === recordId);\r\n        if (!record) {\r\n            alert('Record not found');\r\n            return;\r\n        }\r\n\r\n        const patient = myPatients.find(p => p.id === record.patientId);\r\n        if (!patient) {\r\n            alert('Patient not found');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Always download unencrypted PDF (encryption will be done in Security Tools)\r\n            await pdfService.downloadMedicalRecordPDF(record, patient, {\r\n                includeWatermark: true,\r\n                isEncrypted: false,\r\n                password: ''\r\n            });\r\n\r\n            alert(`âœ… PDF Downloaded Successfully!\r\n\r\nðŸ“„ File: medical_record_${record.id}_${patient.name.replace(/\\s+/g, '_')}.pdf\r\nðŸ” Status: UNENCRYPTED (ready for encryption in Security Tools)\r\nðŸš¨ Watermark: CONFIDENTIAL (at top of document)\r\nðŸ‘¤ Patient: ${patient.name}\r\nðŸ“‹ Record: ${record.title}\r\n\r\nðŸ’¡ Next Steps:\r\n1. Go to Security Tools tab\r\n2. Select this PDF file to encrypt\r\n3. Choose a strong password for encryption\r\n\r\nThe PDF has been saved to your downloads folder.`);\r\n        } catch (error) {\r\n            console.error('PDF download error:', error);\r\n            alert(`âŒ Failed to download PDF: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n        }\r\n    };\r\n\r\n    const handleDownloadPatientPDF = async (patientId: string) => {\r\n        const patient = myPatients.find(p => p.id === patientId);\r\n        if (!patient) {\r\n            alert('Patient not found');\r\n            return;\r\n        }\r\n\r\n        const patientRecords = recentRecords.filter(record => record.patientId === patientId);\r\n\r\n        if (patientRecords.length === 0) {\r\n            alert(`No medical records found for ${patient.name}. Create some records first.`);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            if (patientRecords.length === 1) {\r\n                // Single record\r\n                await pdfService.downloadMedicalRecordPDF(patientRecords[0], patient, {\r\n                    includeWatermark: true,\r\n                    isEncrypted: false,\r\n                    password: ''\r\n                });\r\n            } else {\r\n                // Multiple records - use batch PDF\r\n                const batchPDF = await pdfService.generateBatchPDF(patientRecords, [patient], {\r\n                    includeWatermark: true,\r\n                    isEncrypted: false,\r\n                    password: ''\r\n                });\r\n\r\n                // Create download link for batch PDF\r\n                const url = URL.createObjectURL(batchPDF);\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n\r\n                const filename = `medical_records_${patient.name.replace(/\\s+/g, '_')}_batch.pdf`;\r\n                link.download = filename;\r\n\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n                URL.revokeObjectURL(url);\r\n            }\r\n\r\n            alert(`âœ… PDF Downloaded Successfully!\r\n\r\nðŸ‘¤ Patient: ${patient.name}\r\nðŸ“„ Records: ${patientRecords.length} medical record(s)\r\nðŸ” Status: UNENCRYPTED (ready for encryption in Security Tools)\r\nðŸš¨ Watermark: CONFIDENTIAL (at top of document)\r\n\r\nðŸ’¡ Next Steps:\r\n1. Go to Security Tools tab\r\n2. Select this PDF file to encrypt\r\n3. Choose a strong password for encryption\r\n\r\nThe PDF has been saved to your downloads folder.`);\r\n        } catch (error) {\r\n            console.error('PDF download error:', error);\r\n            alert(`âŒ Failed to download PDF: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n        }\r\n    };\r\n\r\n    const handleAddNewPatient = () => {\r\n        const patientName = prompt('ðŸ‘¤ Enter new patient name:');\r\n        if (!patientName || !patientName.trim()) {\r\n            alert('âŒ Patient name is required');\r\n            return;\r\n        }\r\n\r\n        const patientEmail = prompt('ðŸ“§ Enter patient email:');\r\n        if (!patientEmail || !patientEmail.trim() || !patientEmail.includes('@')) {\r\n            alert('âŒ Valid email is required');\r\n            return;\r\n        }\r\n\r\n        const patientDOB = prompt('ðŸŽ‚ Enter patient date of birth (YYYY-MM-DD):');\r\n        if (!patientDOB || !patientDOB.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\r\n            alert('âŒ Date of birth is required in YYYY-MM-DD format');\r\n            return;\r\n        }\r\n\r\n        const phoneNumber = prompt('ðŸ“ž Enter patient phone number:') || '';\r\n        const address = prompt('ðŸ  Enter patient address:') || '';\r\n        const emergencyContact = prompt('ðŸš¨ Enter emergency contact (Name - Phone):') || '';\r\n        const insuranceProvider = prompt('ðŸ¥ Enter insurance provider:') || 'None';\r\n        const insurancePolicyNumber = prompt('ðŸ“„ Enter insurance policy number:') || '';\r\n\r\n        const newPatient: Patient = {\r\n            id: sharedStateService.generateId('patient'),\r\n            name: patientName.trim(),\r\n            email: patientEmail.trim(),\r\n            dateOfBirth: patientDOB,\r\n            phoneNumber: phoneNumber,\r\n            address: address,\r\n            emergencyContact: emergencyContact,\r\n            insuranceProvider: insuranceProvider,\r\n            insurancePolicyNumber: insurancePolicyNumber,\r\n            lastVisit: new Date().toISOString().split('T')[0],\r\n            upcomingAppointment: 'To be scheduled',\r\n            isActive: true\r\n        };\r\n\r\n        // Add to shared state\r\n        sharedStateService.addPatient(newPatient);\r\n\r\n        alert(`âœ… New patient added successfully!\r\n\r\nðŸ‘¤ Name: ${newPatient.name}\r\nðŸ“§ Email: ${newPatient.email}\r\nðŸŽ‚ DOB: ${newPatient.dateOfBirth}\r\nðŸ“ž Phone: ${newPatient.phoneNumber}\r\nðŸ¥ Insurance: ${newPatient.insuranceProvider}\r\n\r\nThe patient is now available for creating medical records.`);\r\n    };\r\n\r\n    const handleViewNFT = (nftId: string) => {\r\n        const nft = nftRecords.find(n => n.id === nftId);\r\n        if (!nft) {\r\n            alert('âŒ NFT not found. Please try again.');\r\n            return;\r\n        }\r\n\r\n        const patient = myPatients.find(p => p.id === nft.patientId);\r\n        const relatedRecord = recentRecords.find(r => r.id === nft.recordId);\r\n\r\n        alert(`ðŸŽ¨ NFT Health Record Details\r\n\r\nðŸ·ï¸ Name: ${nft.name}\r\nðŸ“ Description: ${nft.description}\r\nðŸ†” Token ID: ${nft.tokenId}\r\nðŸ‘¤ Patient: ${patient?.name || nft.patientId}\r\nðŸ“‹ Related Record: ${relatedRecord?.title || nft.recordId}\r\n\r\nðŸ”— Blockchain Details:\r\nðŸŒ Network: ${nft.blockchainNetwork}\r\nðŸ“ Contract Address: ${nft.contractAddress}\r\nðŸ‘¤ Current Owner: ${nft.currentOwner}\r\nðŸ“… Mint Date: ${new Date(nft.mintDate).toLocaleString()}\r\nðŸ”„ Transferable: ${nft.isTransferable ? 'Yes' : 'No'}\r\nðŸ” Access Level: ${nft.accessLevel}\r\n\r\nðŸ“Ž Metadata URI: ${nft.metadataUri}\r\nðŸ–¼ï¸ Image URL: ${nft.imageUrl}\r\n\r\nâœ… This NFT represents a verified medical record stored securely on the blockchain.\r\nðŸ›¡ï¸ The NFT provides immutable proof of medical data authenticity.`);\r\n    };\r\n\r\n    // File encryption handlers\r\n    const handleFileSelection = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        if (files) {\r\n            const pdfFiles = Array.from(files).filter(file => file.type === 'application/pdf');\r\n            if (pdfFiles.length !== files.length) {\r\n                alert('âš ï¸ Only PDF files are allowed. Non-PDF files have been filtered out.');\r\n            }\r\n            setSelectedFiles(prev => [...prev, ...pdfFiles]);\r\n        }\r\n    };\r\n\r\n    const removeSelectedFile = (index: number) => {\r\n        setSelectedFiles(prev => prev.filter((_, i) => i !== index));\r\n    }; const handleEncryptSelectedFiles = async () => {\r\n        if (selectedFiles.length === 0) {\r\n            alert('âŒ Please select PDF files to encrypt first.');\r\n            return;\r\n        }\r\n\r\n        const password = prompt('ðŸ”’ Enter password to encrypt the selected PDF files:');\r\n        if (!password || !password.trim()) {\r\n            alert('âŒ Password is required for encryption.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const encryptedFiles: { name: string; encryptedData: string }[] = [];\r\n\r\n            for (const file of selectedFiles) {\r\n                // Read file as base64\r\n                const reader = new FileReader();\r\n                const fileData = await new Promise<string>((resolve) => {\r\n                    reader.onload = () => resolve(reader.result as string);\r\n                    reader.readAsDataURL(file);\r\n                });\r\n\r\n                // Encrypt the file data\r\n                const customEncryption = new EncryptionService();\r\n                const salt = customEncryption.generateSalt();\r\n                customEncryption.deriveKey(password, salt);\r\n                const encryptedData = customEncryption.encryptData(fileData);\r\n\r\n                encryptedFiles.push({\r\n                    name: file.name.replace('.pdf', '.enc'), // Change extension to .enc\r\n                    encryptedData: encryptedData\r\n                });\r\n            }\r\n\r\n            // Create download links for encrypted files\r\n            encryptedFiles.forEach(({ name, encryptedData }) => {\r\n                const blob = new Blob([encryptedData], { type: 'application/octet-stream' });\r\n                const url = URL.createObjectURL(blob);\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.download = name;\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n                URL.revokeObjectURL(url);\r\n            });\r\n\r\n            alert(`âœ… Successfully encrypted and downloaded ${encryptedFiles.length} file(s)!\r\n\r\nðŸ” Encryption Details:\r\nðŸ“„ Files: ${encryptedFiles.map(f => f.name).join(', ')}\r\nðŸ›¡ï¸ Security: AES-256 with password protection\r\nðŸ“… Encrypted: ${new Date().toLocaleString()}\r\nðŸ”’ Format: .enc (encrypted files)\r\n\r\nâš ï¸ Remember your password - you'll need it to decrypt these .enc files!\r\nðŸ”„ The encrypted .enc files have been downloaded to your computer.`);\r\n\r\n            // Clear selected files\r\n            setSelectedFiles([]);\r\n\r\n            // Reset file input\r\n            const fileInput = document.getElementById('pdf-file-input') as HTMLInputElement;\r\n            if (fileInput) {\r\n                fileInput.value = '';\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('File encryption error:', error);\r\n            alert('âŒ Failed to encrypt files. Please try again.');\r\n        }\r\n    };\r\n\r\n    // Encrypted file handlers\r\n    const handleEncryptedFileSelection = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        if (files) {\r\n            const encFiles = Array.from(files).filter(file => file.name.endsWith('.enc'));\r\n            if (encFiles.length !== files.length) {\r\n                alert('âš ï¸ Only .enc files are allowed. Non-.enc files have been filtered out.');\r\n            }\r\n            setSelectedEncryptedFiles(prev => [...prev, ...encFiles]);\r\n        }\r\n    };\r\n\r\n    const removeSelectedEncryptedFile = (index: number) => {\r\n        setSelectedEncryptedFiles(prev => prev.filter((_, i) => i !== index));\r\n    };\r\n\r\n    const handleDecryptSelectedFiles = async () => {\r\n        if (selectedEncryptedFiles.length === 0) {\r\n            alert('âŒ Please select .enc files to decrypt first.');\r\n            return;\r\n        }\r\n\r\n        const password = prompt('ðŸ”“ Enter password to decrypt the selected .enc files:');\r\n        if (!password || !password.trim()) {\r\n            alert('âŒ Password is required for decryption.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const decryptedFiles: { name: string; decryptedData: string }[] = [];\r\n\r\n            for (const file of selectedEncryptedFiles) {\r\n                // Read encrypted file content\r\n                const reader = new FileReader();\r\n                const encryptedContent = await new Promise<string>((resolve) => {\r\n                    reader.onload = () => resolve(reader.result as string);\r\n                    reader.readAsText(file);\r\n                });\r\n\r\n                try {\r\n                    // Decrypt the file data\r\n                    const customEncryption = new EncryptionService();\r\n                    const decryptedData = customEncryption.decryptData(encryptedContent);\r\n\r\n                    decryptedFiles.push({\r\n                        name: file.name.replace('.enc', '.pdf'), // Change extension back to .pdf\r\n                        decryptedData: decryptedData\r\n                    });\r\n                } catch (decryptError) {\r\n                    alert(`âŒ Failed to decrypt ${file.name}. Incorrect password or corrupted file.`);\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            if (decryptedFiles.length === 0) {\r\n                alert('âŒ No files were successfully decrypted. Please check your password.');\r\n                return;\r\n            }\r\n\r\n            // Create download links for decrypted files\r\n            decryptedFiles.forEach(({ name, decryptedData }) => {\r\n                // Convert base64 back to blob\r\n                const byteCharacters = atob(decryptedData.split(',')[1]);\r\n                const byteNumbers = new Array(byteCharacters.length);\r\n                for (let i = 0; i < byteCharacters.length; i++) {\r\n                    byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n                }\r\n                const byteArray = new Uint8Array(byteNumbers);\r\n                const blob = new Blob([byteArray], { type: 'application/pdf' });\r\n\r\n                const url = URL.createObjectURL(blob);\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.download = name;\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n                URL.revokeObjectURL(url);\r\n            });\r\n\r\n            alert(`âœ… Successfully decrypted and downloaded ${decryptedFiles.length} PDF file(s)!\r\n\r\nðŸ”“ Decryption Details:\r\nðŸ“„ Files: ${decryptedFiles.map(f => f.name).join(', ')}\r\nðŸ›¡ï¸ Security: Successfully decrypted with correct password\r\nðŸ“… Decrypted: ${new Date().toLocaleString()}\r\nðŸ“„ Format: .pdf (original PDF files restored)\r\n\r\nâœ… Your PDF files are now available and ready to use!\r\nðŸ”„ The decrypted PDF files have been downloaded to your computer.`);\r\n\r\n            // Clear selected encrypted files\r\n            setSelectedEncryptedFiles([]);\r\n\r\n            // Reset file input\r\n            const encFileInput = document.getElementById('enc-file-input') as HTMLInputElement;\r\n            if (encFileInput) {\r\n                encFileInput.value = '';\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('File decryption error:', error);\r\n            alert('âŒ Failed to decrypt files. Please try again.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            {/* Header */}\r\n            <header className=\"bg-white shadow-sm border-b\">\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                    <div className=\"flex justify-between items-center h-16\">\r\n                        <div className=\"flex items-center\">\r\n                            <div className=\"flex-shrink-0\">\r\n                                <h1 className=\"text-xl font-bold text-gray-900\">ðŸ©º Doctor Dashboard</h1>\r\n                            </div>\r\n                            <div className=\"ml-4\">\r\n                                <Badge variant=\"success\" size=\"sm\">ðŸ”’ HIPAA Compliant</Badge>\r\n                                <Badge variant=\"primary\" size=\"sm\" className=\"ml-2\">ðŸ‘¨â€âš•ï¸ Medical Access</Badge>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center space-x-4\">\r\n                            <Timer\r\n                                duration={sessionTimeLeft}\r\n                                onExpire={handleSessionExpire}\r\n                                className=\"text-sm\"\r\n                            />\r\n\r\n                            <div className=\"flex items-center space-x-2\">\r\n                                <img\r\n                                    className=\"h-8 w-8 rounded-full\"\r\n                                    src={`https://ui-avatars.com/api/?name=${user.name}&background=2563eb&color=fff`}\r\n                                    alt={user.name}\r\n                                />\r\n                                <div className=\"text-sm\">\r\n                                    <div className=\"font-medium text-gray-900\">{user.name}</div>\r\n                                    <div className=\"text-blue-600 font-semibold\">{user.role.toUpperCase()}</div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={onLogout}\r\n                                className=\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700\"\r\n                            >\r\n                                Logout\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Navigation Tabs */}\r\n            <div className=\"bg-white border-b\">\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                    <nav className=\"flex space-x-8\">\r\n                        {[\r\n                            { id: 'patients', label: 'ðŸ‘¥ My Patients', icon: 'ðŸ‘¥' },\r\n                            { id: 'records', label: 'ðŸ“‹ Medical Records', icon: 'ðŸ“‹' },\r\n                            { id: 'insurance', label: 'ðŸ’° Insurance Claims', icon: 'ðŸ’°' },\r\n                            { id: 'nfts', label: 'ðŸŽ¨ NFT Health Records', icon: 'ðŸŽ¨' },\r\n                            { id: 'security', label: 'ðŸ”’ Security Tools', icon: 'ðŸ”’' }\r\n                        ].map((tab) => (\r\n                            <button\r\n                                key={tab.id}\r\n                                onClick={() => setActiveTab(tab.id as any)}\r\n                                className={`py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id\r\n                                    ? 'border-blue-500 text-blue-600'\r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                                    }`}\r\n                            >\r\n                                {tab.label}\r\n                            </button>\r\n                        ))}\r\n                    </nav>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n\r\n                {/* Patients Tab */}\r\n                {activeTab === 'patients' && (\r\n                    <div className=\"bg-white shadow rounded-lg\">\r\n                        <div className=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\r\n                            <h3 className=\"text-lg font-medium text-gray-900\">ðŸ‘¥ My Patients</h3>\r\n                            <div className=\"flex items-center space-x-4\">\r\n                                <button\r\n                                    onClick={handleAddNewPatient}\r\n                                    className=\"bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700\"\r\n                                >\r\n                                    + New Patient\r\n                                </button>\r\n                                <div className=\"text-sm text-gray-500\">\r\n                                    {myPatients.length} active patients\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"p-6\">\r\n                            <div className=\"grid gap-6\">\r\n                                {myPatients.map((patient) => (\r\n                                    <div key={patient.id} className=\"border rounded-lg p-6 hover:shadow-md transition-shadow\">\r\n                                        <div className=\"flex items-start justify-between\">\r\n                                            <div className=\"flex items-center space-x-4\">\r\n                                                <img\r\n                                                    className=\"h-12 w-12 rounded-full\"\r\n                                                    src={`https://ui-avatars.com/api/?name=${patient.name}&background=random`}\r\n                                                    alt={patient.name}\r\n                                                />\r\n                                                <div>\r\n                                                    <h4 className=\"text-lg font-medium text-gray-900\">{patient.name}</h4>\r\n                                                    <p className=\"text-sm text-gray-500\">{patient.email}</p>\r\n                                                    <p className=\"text-sm text-gray-500\">DOB: {patient.dateOfBirth}</p>\r\n                                                    <p className=\"text-sm text-gray-500\">Phone: {patient.phoneNumber}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"text-right\">\r\n                                                <Badge variant=\"success\" size=\"sm\">Active</Badge>\r\n                                                <p className=\"text-sm text-gray-500 mt-2\">Last Visit: {patient.lastVisit}</p>\r\n                                                <p className=\"text-sm text-blue-600 font-medium\">Next: {patient.upcomingAppointment}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                            <div>\r\n                                                <p className=\"text-sm font-medium text-gray-900\">Insurance</p>\r\n                                                <p className=\"text-sm text-gray-500\">{patient.insuranceProvider}</p>\r\n                                                <p className=\"text-sm text-gray-400 font-mono\">{patient.insurancePolicyNumber}</p>\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"text-sm font-medium text-gray-900\">Emergency Contact</p>\r\n                                                <p className=\"text-sm text-gray-500\">{patient.emergencyContact}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"mt-4 flex space-x-3\">\r\n                                            <button\r\n                                                onClick={handleCreateRecord}\r\n                                                className=\"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700\"\r\n                                            >\r\n                                                ðŸ“‹ New Record\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleSubmitInsuranceClaim(patient.id)}\r\n                                                className=\"bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700\"\r\n                                            >\r\n                                                ðŸ’° Submit Claim\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleViewHistory(patient.id)}\r\n                                                className=\"bg-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-700\"\r\n                                            >\r\n                                                ðŸ‘ï¸ View History\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleDownloadPatientPDF(patient.id)}\r\n                                                className=\"bg-purple-600 text-white px-4 py-2 rounded text-sm hover:bg-purple-700\"\r\n                                            >\r\n                                                ðŸ“„ Download Records\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Medical Records Tab */}\r\n                {activeTab === 'records' && (\r\n                    <div className=\"bg-white shadow rounded-lg\">\r\n                        <div className=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\r\n                            <h3 className=\"text-lg font-medium text-gray-900\">ðŸ“‹ Recent Medical Records</h3>\r\n                            <button\r\n                                onClick={handleCreateRecord}\r\n                                className=\"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700\"\r\n                            >\r\n                                + New Record\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"p-6\">\r\n                            <div className=\"space-y-6\">\r\n                                {recentRecords.map((record) => (\r\n                                    <div key={record.id} className=\"border rounded-lg p-6\">\r\n                                        <div className=\"flex items-start justify-between\">\r\n                                            <div className=\"flex-1\">\r\n                                                <div className=\"flex items-center space-x-2 mb-2\">\r\n                                                    <h4 className=\"text-lg font-medium text-gray-900\">{record.title}</h4>\r\n                                                    {record.doctorId === user.id ? (\r\n                                                        <Badge variant=\"primary\" size=\"sm\">ðŸ‘¨â€âš•ï¸ Doctor Added</Badge>\r\n                                                    ) : (\r\n                                                        <Badge variant=\"info\" size=\"sm\">ðŸ‘¤ Patient Added</Badge>\r\n                                                    )}\r\n                                                    {recordEncryptionStatus[record.id] ? (\r\n                                                        <Badge variant=\"warning\" size=\"sm\">ðŸ”’ ENCRYPTED</Badge>\r\n                                                    ) : (\r\n                                                        <Badge variant=\"success\" size=\"sm\">ðŸ“„ Plain Text</Badge>\r\n                                                    )}\r\n                                                    <Badge variant=\"primary\" size=\"sm\">ðŸ§± On-Chain</Badge>\r\n                                                    {record.nftTokenId && (\r\n                                                        <Badge variant=\"secondary\" size=\"sm\">ðŸŽ¨ NFT</Badge>\r\n                                                    )}\r\n                                                </div>\r\n                                                <p className=\"text-sm text-gray-600 mb-2\">{record.description}</p>\r\n                                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n                                                    <div>\r\n                                                        <p><span className=\"font-medium\">Patient:</span> {myPatients.find(p => p.id === record.patientId)?.name}</p>\r\n                                                        <p><span className=\"font-medium\">Date:</span> {record.date}</p>\r\n                                                        <p><span className=\"font-medium\">Diagnosis:</span> {record.diagnosis}</p>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p><span className=\"font-medium\">Prescription:</span> {record.prescription}</p>\r\n                                                        <p className=\"font-mono text-xs\"><span className=\"font-medium\">Blockchain:</span> {record.blockchainHash}</p>\r\n                                                        {record.ipfsHash && (\r\n                                                            <p className=\"font-mono text-xs\"><span className=\"font-medium\">IPFS:</span> {record.ipfsHash}</p>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"ml-4 flex flex-col space-y-2\">\r\n                                                {!record.nftTokenId && (\r\n                                                    <button\r\n                                                        onClick={() => handleMintNFT(record.id)}\r\n                                                        className=\"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700\"\r\n                                                    >\r\n                                                        ðŸŽ¨ Mint NFT\r\n                                                    </button>\r\n                                                )}\r\n                                                <button\r\n                                                    onClick={() => handleEncryptRecord(record.id)}\r\n                                                    className=\"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700\"\r\n                                                >\r\n                                                    ðŸ”’ Encrypt\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => handleDecryptRecord(record.id)}\r\n                                                    className=\"bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700\"\r\n                                                >\r\n                                                    ðŸ”“ Decrypt\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => handleViewRecord(record.id)}\r\n                                                    className=\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700\"\r\n                                                >\r\n                                                    ðŸ‘ï¸ View\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => handleDownloadPDF(record.id)}\r\n                                                    className=\"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700\"\r\n                                                >\r\n                                                    ðŸ“„ Download PDF\r\n                                                </button>\r\n                                                <button className=\"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700\">\r\n                                                    âœï¸ Edit\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Insurance Claims Tab */}\r\n                {activeTab === 'insurance' && (\r\n                    <div className=\"bg-white shadow rounded-lg\">\r\n                        <div className=\"px-6 py-4 border-b border-gray-200\">\r\n                            <h3 className=\"text-lg font-medium text-gray-900\">ðŸ’° Insurance Claims</h3>\r\n                        </div>\r\n                        <div className=\"p-6\">\r\n                            <div className=\"space-y-6\">\r\n                                {insuranceClaims.map((claim) => (\r\n                                    <div key={claim.id} className=\"border rounded-lg p-6\">\r\n                                        <div className=\"flex items-start justify-between\">\r\n                                            <div className=\"flex-1\">\r\n                                                <div className=\"flex items-center space-x-2 mb-2\">\r\n                                                    <h4 className=\"text-lg font-medium text-gray-900\">Claim #{claim.claimNumber}</h4>\r\n                                                    <Badge variant={getStatusColor(claim.status)} size=\"sm\">\r\n                                                        {claim.status.toUpperCase()}\r\n                                                    </Badge>\r\n                                                    {claim.isProcessedOnChain && (\r\n                                                        <Badge variant=\"primary\" size=\"sm\">ðŸ§± On-Chain</Badge>\r\n                                                    )}\r\n                                                </div>\r\n                                                <p className=\"text-sm text-gray-600 mb-2\">{claim.description}</p>\r\n                                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\r\n                                                    <div>\r\n                                                        <p><span className=\"font-medium\">Patient:</span> {myPatients.find(p => p.id === claim.patientId)?.name}</p>\r\n                                                        <p><span className=\"font-medium\">Amount:</span> ${claim.amount.toFixed(2)}</p>\r\n                                                        <p><span className=\"font-medium\">Submitted:</span> {claim.submissionDate}</p>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p><span className=\"font-medium\">Provider:</span> {claim.insuranceProvider}</p>\r\n                                                        {claim.approvalDate && (\r\n                                                            <p><span className=\"font-medium\">Approved:</span> {claim.approvalDate}</p>\r\n                                                        )}\r\n                                                        <p className=\"font-mono text-xs\"><span className=\"font-medium\">Contract:</span> {claim.smartContractAddress}</p>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p className=\"font-mono text-xs\"><span className=\"font-medium\">Tx ID:</span> {claim.blockchainTxId?.substring(0, 20)}...</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"ml-4\">\r\n                                                <button\r\n                                                    onClick={() => handleViewInsuranceClaim(claim.id)}\r\n                                                    className=\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700\"\r\n                                                >\r\n                                                    ðŸ‘ï¸ View Details\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* NFT Health Records Tab */}\r\n                {activeTab === 'nfts' && (\r\n                    <div className=\"bg-white shadow rounded-lg\">\r\n                        <div className=\"px-6 py-4 border-b border-gray-200\">\r\n                            <h3 className=\"text-lg font-medium text-gray-900\">ðŸŽ¨ NFT Health Records</h3>\r\n                        </div>\r\n                        <div className=\"p-6\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                                {nftRecords.map((nft) => (\r\n                                    <div key={nft.id} className=\"border rounded-lg p-4 hover:shadow-md transition-shadow\">\r\n                                        <div className=\"aspect-square bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg mb-4 flex items-center justify-center\">\r\n                                            <span className=\"text-white text-4xl\">ðŸ¥</span>\r\n                                        </div>\r\n                                        <div className=\"space-y-2\">\r\n                                            <h4 className=\"font-medium text-gray-900\">{nft.name}</h4>\r\n                                            <p className=\"text-sm text-gray-600\">{nft.description}</p>\r\n                                            <div className=\"text-xs space-y-1\">\r\n                                                <p><span className=\"font-medium\">Token ID:</span> {nft.tokenId}</p>\r\n                                                <p><span className=\"font-medium\">Patient:</span> {myPatients.find(p => p.id === nft.patientId)?.name}</p>\r\n                                                <p><span className=\"font-medium\">Network:</span> {nft.blockchainNetwork}</p>\r\n                                                <p><span className=\"font-medium\">Minted:</span> {new Date(nft.mintDate).toLocaleDateString()}</p>\r\n                                                <p className=\"font-mono\"><span className=\"font-medium\">Contract:</span> {nft.contractAddress.substring(0, 10)}...</p>\r\n                                            </div>\r\n                                            <div className=\"flex items-center justify-between pt-2\">\r\n                                                <Badge variant=\"secondary\" size=\"sm\">\r\n                                                    {nft.isTransferable ? 'Transferable' : 'Non-Transferable'}\r\n                                                </Badge>\r\n                                                <div className=\"flex space-x-2\">\r\n                                                    <button\r\n                                                        onClick={() => handleViewNFT(nft.id)}\r\n                                                        className=\"bg-purple-600 text-white px-2 py-1 rounded text-xs hover:bg-purple-700 font-medium\"\r\n                                                    >\r\n                                                        ðŸ‘ï¸ View NFT\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => {\r\n                                                            const relatedRecord = recentRecords.find(r => r.id === nft.recordId);\r\n                                                            if (relatedRecord) {\r\n                                                                handleDownloadPDF(relatedRecord.id);\r\n                                                            } else {\r\n                                                                alert('Related medical record not found');\r\n                                                            }\r\n                                                        }}\r\n                                                        className=\"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700\"\r\n                                                    >\r\n                                                        ðŸ“„ PDF\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Security Tools Tab */}\r\n                {activeTab === 'security' && (\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"bg-white shadow rounded-lg\">\r\n                            <div className=\"px-6 py-4 border-b border-gray-200\">\r\n                                <h3 className=\"text-lg font-medium text-gray-900\">ðŸ”’ Encryption & Security Tools</h3>\r\n                                <p className=\"text-sm text-gray-500 mt-1\">Secure patient records with advanced encryption</p>\r\n                            </div>\r\n                            <div className=\"p-6\">\r\n                                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                                    <div className=\"space-y-4\">\r\n                                        <h4 className=\"font-medium text-gray-900\">ðŸ” PDF File Encryption</h4>\r\n                                        <p className=\"text-sm text-gray-600\">Choose PDF files from your computer to encrypt</p>\r\n                                        <div className=\"space-y-4\">\r\n                                            <div className=\"p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50\">\r\n                                                <div className=\"text-center\">\r\n                                                    <span className=\"text-4xl mb-4 block\">ðŸ”’</span>\r\n                                                    <h5 className=\"font-medium text-gray-900 mb-2\">Encrypt PDF Files</h5>\r\n                                                    <p className=\"text-sm text-gray-600 mb-4\">Select PDF files from your computer to encrypt with password protection</p>\r\n                                                    <input\r\n                                                        type=\"file\"\r\n                                                        accept=\".pdf\"\r\n                                                        multiple\r\n                                                        onChange={handleFileSelection}\r\n                                                        className=\"hidden\"\r\n                                                        id=\"pdf-file-input\"\r\n                                                    />\r\n                                                    <label\r\n                                                        htmlFor=\"pdf-file-input\"\r\n                                                        className=\"bg-green-600 text-white px-4 py-2 rounded cursor-pointer hover:bg-green-700 inline-block\"\r\n                                                    >\r\n                                                        ðŸ“ Choose PDF Files to Encrypt\r\n                                                    </label>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {selectedFiles.length > 0 && (\r\n                                                <div className=\"p-4 border rounded-lg bg-blue-50\">\r\n                                                    <h6 className=\"font-medium text-blue-900 mb-2\">Selected Files ({selectedFiles.length})</h6>\r\n                                                    <div className=\"space-y-2\">\r\n                                                        {selectedFiles.map((file, index) => (\r\n                                                            <div key={index} className=\"flex items-center justify-between p-2 bg-white rounded\">\r\n                                                                <div className=\"flex items-center space-x-2\">\r\n                                                                    <span className=\"text-blue-600\">ðŸ“„</span>\r\n                                                                    <span className=\"text-sm font-medium\">{file.name}</span>\r\n                                                                    <span className=\"text-xs text-gray-500\">({Math.round(file.size / 1024)} KB)</span>\r\n                                                                </div>\r\n                                                                <button\r\n                                                                    onClick={() => removeSelectedFile(index)}\r\n                                                                    className=\"text-red-600 hover:text-red-800 text-xs\"\r\n                                                                >\r\n                                                                    âŒ Remove\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={handleEncryptSelectedFiles}\r\n                                                        className=\"w-full mt-3 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n                                                    >\r\n                                                        ðŸ”’ Encrypt Selected Files\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            <div className=\"p-4 border rounded-lg bg-orange-50\">\r\n                                                <h6 className=\"font-medium text-orange-900 mb-2\">ðŸ“‹ PDF Encryption/Decryption Workflow</h6>\r\n                                                <p className=\"text-sm text-orange-700 mb-3\">\r\n                                                    ðŸ”’ <strong>Encryption:</strong> PDF â†’ .enc (encrypted file)<br />\r\n                                                    ðŸ”“ <strong>Decryption:</strong> .enc â†’ PDF (original file)<br />\r\n                                                    ðŸ’¡ Export PDFs from Medical Records, then encrypt here\r\n                                                </p>\r\n                                                <button\r\n                                                    onClick={() => setActiveTab('records')}\r\n                                                    className=\"bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700\"\r\n                                                >\r\n                                                    ðŸ“‹ Go to Medical Records\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-4\">\r\n                                        <h4 className=\"font-medium text-gray-900\">ï¿½ PDF File Decryption</h4>\r\n                                        <p className=\"text-sm text-gray-600\">Choose encrypted (.enc) files from your computer to decrypt</p>\r\n                                        <div className=\"space-y-4\">\r\n                                            <div className=\"p-4 border-2 border-dashed border-orange-300 rounded-lg bg-orange-50\">\r\n                                                <div className=\"text-center\">\r\n                                                    <span className=\"text-4xl mb-4 block\">ðŸ”“</span>\r\n                                                    <h5 className=\"font-medium text-gray-900 mb-2\">Decrypt Encrypted Files</h5>\r\n                                                    <p className=\"text-sm text-gray-600 mb-4\">Select .enc files from your computer to decrypt with password</p>\r\n                                                    <input\r\n                                                        type=\"file\"\r\n                                                        accept=\".enc\"\r\n                                                        multiple\r\n                                                        onChange={handleEncryptedFileSelection}\r\n                                                        className=\"hidden\"\r\n                                                        id=\"enc-file-input\"\r\n                                                    />\r\n                                                    <label\r\n                                                        htmlFor=\"enc-file-input\"\r\n                                                        className=\"bg-orange-600 text-white px-4 py-2 rounded cursor-pointer hover:bg-orange-700 inline-block\"\r\n                                                    >\r\n                                                        ðŸ“ Choose .enc Files to Decrypt\r\n                                                    </label>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {selectedEncryptedFiles.length > 0 && (\r\n                                                <div className=\"p-4 border rounded-lg bg-orange-50\">\r\n                                                    <h6 className=\"font-medium text-orange-900 mb-2\">Selected Encrypted Files ({selectedEncryptedFiles.length})</h6>\r\n                                                    <div className=\"space-y-2\">\r\n                                                        {selectedEncryptedFiles.map((file, index) => (\r\n                                                            <div key={index} className=\"flex items-center justify-between p-2 bg-white rounded\">\r\n                                                                <div className=\"flex items-center space-x-2\">\r\n                                                                    <span className=\"text-orange-600\">ðŸ”’</span>\r\n                                                                    <span className=\"text-sm font-medium\">{file.name}</span>\r\n                                                                    <span className=\"text-xs text-gray-500\">({Math.round(file.size / 1024)} KB)</span>\r\n                                                                </div>\r\n                                                                <button\r\n                                                                    onClick={() => removeSelectedEncryptedFile(index)}\r\n                                                                    className=\"text-red-600 hover:text-red-800 text-xs\"\r\n                                                                >\r\n                                                                    âŒ Remove\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={handleDecryptSelectedFiles}\r\n                                                        className=\"w-full mt-3 bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700\"\r\n                                                    >\r\n                                                        ï¿½ Decrypt Selected Files\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <h4 className=\"font-medium text-gray-900\">ðŸ“‹ Clipboard Security</h4>\r\n                                        <p className=\"text-sm text-gray-600\">Monitor clipboard for suspicious wallet addresses with sound alerts</p>\r\n                                        <div className=\"p-4 border rounded-lg\">\r\n                                            <div className=\"flex items-center justify-between mb-3\">\r\n                                                <span className=\"text-sm font-medium\">Clipboard Monitoring</span>\r\n                                                <Badge variant={clipboardMonitoring ? 'success' : 'secondary'} size=\"sm\">\r\n                                                    {clipboardMonitoring ? 'Active' : 'Inactive'}\r\n                                                </Badge>\r\n                                            </div>\r\n                                            \r\n                                            {/* Real-time clipboard alert */}\r\n                                            {clipboardAlert && (\r\n                                                <div className={`mb-3 p-3 rounded-lg border ${clipboardAlert.isFake \r\n                                                    ? 'bg-red-50 border-red-200' : 'bg-blue-50 border-blue-200'}`}>\r\n                                                    <div className=\"flex items-start space-x-2\">\r\n                                                        <span className=\"text-lg\">\r\n                                                            {clipboardAlert.isFake ? 'ðŸš¨' : 'ðŸ“‹'}\r\n                                                        </span>\r\n                                                        <div className=\"flex-1\">\r\n                                                            <h6 className={`font-medium text-sm ${clipboardAlert.isFake \r\n                                                                ? 'text-red-800' : 'text-blue-800'}`}>\r\n                                                                {clipboardAlert.isFake ? 'SUSPICIOUS ADDRESS DETECTED!' : 'Wallet Address Detected'}\r\n                                                            </h6>\r\n                                                            <p className={`text-xs mt-1 font-mono ${clipboardAlert.isFake \r\n                                                                ? 'text-red-700' : 'text-blue-700'}`}>\r\n                                                                {clipboardAlert.address}\r\n                                                            </p>\r\n                                                            <p className={`text-xs mt-1 ${clipboardAlert.isFake \r\n                                                                ? 'text-red-600' : 'text-blue-600'}`}>\r\n                                                                {clipboardAlert.isFake \r\n                                                                    ? 'This address appears to be fake or compromised!'\r\n                                                                    : 'Copied to clipboard'}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                            \r\n                                            <button\r\n                                                onClick={toggleClipboardMonitoring}\r\n                                                className={`w-full px-4 py-2 rounded text-sm ${clipboardMonitoring\r\n                                                    ? 'bg-red-600 hover:bg-red-700 text-white'\r\n                                                    : 'bg-blue-600 hover:bg-blue-700 text-white'\r\n                                                    }`}\r\n                                            >\r\n                                                {clipboardMonitoring ? 'â¹ï¸ Stop Monitoring' : 'ðŸ” Start Monitoring'}\r\n                                            </button>\r\n                                            \r\n                                            {/* Test buttons */}\r\n                                            {clipboardMonitoring && (\r\n                                                <div className=\"mt-3 flex space-x-2\">\r\n                                                    <button\r\n                                                        onClick={() => clipboardSecurityService.testAlert(false)}\r\n                                                        className=\"flex-1 px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700\"\r\n                                                    >\r\n                                                        ðŸ”Š Test Normal Alert\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => clipboardSecurityService.testAlert(true)}\r\n                                                        className=\"flex-1 px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700\"\r\n                                                    >\r\n                                                        ðŸš¨ Test Fake Alert\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n                                            \r\n                                            <div className=\"mt-3 text-xs text-gray-500\">\r\n                                                <p>â€¢ Detects cryptocurrency wallet addresses (ETH, BTC)</p>\r\n                                                <p>â€¢ Plays sound alerts for suspicious addresses</p>\r\n                                                <p>â€¢ Protects against clipboard hijacking attacks</p>\r\n                                                <p>â€¢ Real-time monitoring with visual feedback</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n                                    <div className=\"flex items-start\">\r\n                                        <span className=\"text-yellow-600 text-lg mr-2\">âš ï¸</span>\r\n                                        <div>\r\n                                            <h5 className=\"font-medium text-yellow-800\">Security Notice</h5>\r\n                                            <p className=\"text-sm text-yellow-700 mt-1\">\r\n                                                Always ensure patient records are encrypted before transmission.\r\n                                                Use blockchain verification for data integrity and monitor for suspicious activities.\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </main>\r\n\r\n            {/* Create Record Modal */}\r\n            {showCreateRecordModal && (\r\n                <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n                    <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n                        <div className=\"mt-3\">\r\n                            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Create New Medical Record</h3>\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Patient</label>\r\n                                    <select\r\n                                        value={newRecordForm.patientId}\r\n                                        onChange={(e) => setNewRecordForm(prev => ({ ...prev, patientId: e.target.value }))}\r\n                                        className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                                    >\r\n                                        <option value=\"\">Select Patient</option>\r\n                                        {myPatients.map((patient) => (\r\n                                            <option key={patient.id} value={patient.id}>{patient.name}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Title</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={newRecordForm.title}\r\n                                        onChange={(e) => setNewRecordForm(prev => ({ ...prev, title: e.target.value }))}\r\n                                        className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                                        placeholder=\"Record title\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Diagnosis</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={newRecordForm.diagnosis}\r\n                                        onChange={(e) => setNewRecordForm(prev => ({ ...prev, diagnosis: e.target.value }))}\r\n                                        className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                                        placeholder=\"Diagnosis\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Prescription</label>\r\n                                    <textarea\r\n                                        value={newRecordForm.prescription}\r\n                                        onChange={(e) => setNewRecordForm(prev => ({ ...prev, prescription: e.target.value }))}\r\n                                        className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                                        rows={3}\r\n                                        placeholder=\"Prescription details\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Description</label>\r\n                                    <textarea\r\n                                        value={newRecordForm.description}\r\n                                        onChange={(e) => setNewRecordForm(prev => ({ ...prev, description: e.target.value }))}\r\n                                        className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                                        rows={3}\r\n                                        placeholder=\"Additional notes\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex justify-end space-x-3 mt-6\">\r\n                                <button\r\n                                    onClick={() => setShowCreateRecordModal(false)}\r\n                                    className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleSaveRecord}\r\n                                    className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n                                >\r\n                                    Create Record\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Insurance Claim Modal */}\r\n            {showClaimModal && (\r\n                <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n                    <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n                        <div className=\"mt-3\">\r\n                            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Submit Insurance Claim</h3>\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Patient</label>\r\n                                    <select\r\n                                        value={newClaimForm.patientId}\r\n                                        onChange={(e) => setNewClaimForm(prev => ({ ...prev, patientId: e.target.value }))}\r\n                                        className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                                    >\r\n                                        <option value=\"\">Select Patient</option>\r\n                                        {myPatients.map((patient) => (\r\n                                            <option key={patient.id} value={patient.id}>{patient.name}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Insurance Provider</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={newClaimForm.insuranceProvider}\r\n                                        onChange={(e) => setNewClaimForm(prev => ({ ...prev, insuranceProvider: e.target.value }))}\r\n                                        className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                                        placeholder=\"Insurance company name\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Claim Amount ($)</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={newClaimForm.amount}\r\n                                        onChange={(e) => setNewClaimForm(prev => ({ ...prev, amount: e.target.value }))}\r\n                                        className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                                        placeholder=\"0.00\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Description</label>\r\n                                    <textarea\r\n                                        value={newClaimForm.description}\r\n                                        onChange={(e) => setNewClaimForm(prev => ({ ...prev, description: e.target.value }))}\r\n                                        className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                                        rows={4}\r\n                                        placeholder=\"Claim description and details\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex justify-end space-x-3 mt-6\">\r\n                                <button\r\n                                    onClick={() => setShowClaimModal(false)}\r\n                                    className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleSaveClaim}\r\n                                    className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700\"\r\n                                >\r\n                                    Submit Claim\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DoctorDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}