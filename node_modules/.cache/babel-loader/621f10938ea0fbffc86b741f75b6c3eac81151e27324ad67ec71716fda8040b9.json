{"ast":null,"code":"var _jsxFileName = \"D:\\\\DATA\\\\CAREER\\\\INTERNSHIPS\\\\EMRChains Internship NSTP\\\\PROJECTS\\\\HEALTHCARE_SYSTEM\\\\src\\\\components\\\\Auth\\\\EnhancedBiometricVerification.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport Modal from '../UI/Modal';\nimport Badge from '../UI/Badge';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EnhancedBiometricVerification = ({\n  isOpen,\n  onClose,\n  onSuccess,\n  onFailure,\n  isLoading = false\n}) => {\n  _s();\n  const [verificationStep, setVerificationStep] = useState('init');\n  const [cameraStream, setCameraStream] = useState(null);\n  const [faceDetected, setFaceDetected] = useState(false);\n  const [countdown, setCountdown] = useState(5);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [showTroubleshooting, setShowTroubleshooting] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const handleCaptureFace = useCallback(async () => {\n    if (!videoRef.current || !canvasRef.current) return;\n    setVerificationStep('processing');\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    const context = canvas.getContext('2d');\n    if (context) {\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      context.drawImage(video, 0, 0);\n\n      // Simulate biometric processing\n      setTimeout(() => {\n        // Stop camera stream\n        if (cameraStream) {\n          cameraStream.getTracks().forEach(track => track.stop());\n          setCameraStream(null);\n        }\n\n        // Simulate successful face recognition\n        const success = Math.random() > 0.1; // 90% success rate for demo\n\n        if (success) {\n          setVerificationStep('success');\n          setTimeout(() => {\n            onSuccess();\n          }, 1500);\n        } else {\n          setErrorMessage('Face recognition failed. Please try again.');\n          setVerificationStep('error');\n          onFailure === null || onFailure === void 0 ? void 0 : onFailure('Face recognition failed');\n        }\n      }, 3000);\n    }\n  }, [cameraStream, onSuccess, onFailure]);\n  useEffect(() => {\n    if (verificationStep === 'camera' && countdown > 0) {\n      const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n      return () => clearTimeout(timer);\n    } else if (verificationStep === 'camera' && countdown === 0) {\n      handleCaptureFace();\n    }\n  }, [verificationStep, countdown, handleCaptureFace]);\n  useEffect(() => {\n    return () => {\n      if (cameraStream) {\n        cameraStream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, [cameraStream]);\n  const checkCameraPermissions = async () => {\n    try {\n      // Check if we're in a secure context (HTTPS or localhost)\n      if (!window.isSecureContext && window.location.hostname !== 'localhost') {\n        return {\n          hasPermission: false,\n          error: 'Camera access requires HTTPS or localhost. Please ensure you are using a secure connection.'\n        };\n      }\n\n      // Check if mediaDevices is supported\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        return {\n          hasPermission: false,\n          error: 'Your browser does not support camera access. Please use Chrome, Firefox, or Safari.'\n        };\n      }\n\n      // Try to get camera permissions without actually starting the camera\n      try {\n        const permissionStatus = await navigator.permissions.query({\n          name: 'camera'\n        });\n        if (permissionStatus.state === 'denied') {\n          return {\n            hasPermission: false,\n            error: 'Camera permission is permanently denied. Please check your browser settings.'\n          };\n        }\n      } catch (permissionError) {\n        // Permissions API might not be supported, we'll try getUserMedia directly\n        console.log('Permissions API not available, will attempt direct camera access');\n      }\n      return {\n        hasPermission: true\n      };\n    } catch (error) {\n      return {\n        hasPermission: false,\n        error: `Permission check failed: ${error.message}`\n      };\n    }\n  };\n  const startCamera = async () => {\n    try {\n      setVerificationStep('camera');\n      setCountdown(5);\n      setErrorMessage('');\n\n      // First check permissions\n      const permissionCheck = await checkCameraPermissions();\n      if (!permissionCheck.hasPermission) {\n        throw new Error(permissionCheck.error);\n      }\n\n      // Start with more permissive camera constraints\n      let stream;\n      try {\n        // Try with ideal constraints first\n        stream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            width: {\n              ideal: 640,\n              min: 320\n            },\n            height: {\n              ideal: 480,\n              min: 240\n            },\n            facingMode: 'user'\n          },\n          audio: false\n        });\n      } catch (constraintError) {\n        console.log('Ideal constraints failed, trying basic constraints:', constraintError);\n        try {\n          // Fallback to basic constraints\n          stream = await navigator.mediaDevices.getUserMedia({\n            video: true,\n            audio: false\n          });\n        } catch (basicError) {\n          console.log('Basic constraints also failed, trying minimal constraints:', basicError);\n          // Last resort: minimal constraints\n          stream = await navigator.mediaDevices.getUserMedia({\n            video: {\n              facingMode: 'user'\n            },\n            audio: false\n          });\n        }\n      }\n      setCameraStream(stream);\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n\n        // Handle video load events\n        videoRef.current.onloadedmetadata = () => {\n          if (videoRef.current) {\n            videoRef.current.play().catch(playError => {\n              console.error('Video play failed:', playError);\n              setErrorMessage('Failed to start video playback. Your browser might be blocking autoplay.');\n              setVerificationStep('error');\n            });\n          }\n        };\n        videoRef.current.onerror = videoError => {\n          console.error('Video error:', videoError);\n          setErrorMessage('Video stream error occurred. Please check your camera connection.');\n          setVerificationStep('error');\n        };\n      }\n\n      // Simulate face detection after a delay\n      setTimeout(() => {\n        setFaceDetected(true);\n      }, 2000);\n    } catch (error) {\n      var _error$message, _error$message2, _error$message3;\n      console.error('Camera access error:', error);\n      let errorMsg = 'Camera access failed';\n      let errorDetails = '';\n      let instructions = '';\n\n      // Handle specific error types with detailed instructions\n      if (error.name === 'NotAllowedError' || error.name === 'PermissionDeniedError') {\n        errorMsg = 'üö´ Camera Permission Denied';\n        errorDetails = 'Camera access was blocked by your browser.';\n        instructions = getPermissionInstructions();\n      } else if (error.name === 'NotFoundError' || error.name === 'DevicesNotFoundError') {\n        errorMsg = 'üì∑ No Camera Found';\n        errorDetails = 'No camera device was detected on this device.';\n        instructions = 'Please ensure your camera is connected and working properly.';\n      } else if (error.name === 'NotReadableError' || error.name === 'TrackStartError') {\n        errorMsg = '‚ö†Ô∏è Camera In Use';\n        errorDetails = 'Camera is being used by another application.';\n        instructions = 'Please close other applications that might be using the camera (Zoom, Skype, etc.) and try again.';\n      } else if (error.name === 'OverconstrainedError' || error.name === 'ConstraintNotSatisfiedError') {\n        errorMsg = '‚öôÔ∏è Camera Constraints Error';\n        errorDetails = 'Camera does not support the required specifications.';\n        instructions = 'Your camera might not support the required resolution. Please try with a different camera.';\n      } else if ((_error$message = error.message) !== null && _error$message !== void 0 && _error$message.includes('secure context') || (_error$message2 = error.message) !== null && _error$message2 !== void 0 && _error$message2.includes('HTTPS')) {\n        errorMsg = 'üîí Secure Connection Required';\n        errorDetails = 'Camera access requires HTTPS or localhost.';\n        instructions = 'Please access this page via HTTPS (https://) or localhost for camera functionality.';\n      } else if ((_error$message3 = error.message) !== null && _error$message3 !== void 0 && _error$message3.includes('not supported')) {\n        errorMsg = 'üåê Browser Not Supported';\n        errorDetails = 'Your browser does not support camera access.';\n        instructions = 'Please use a modern browser like Chrome, Firefox, or Safari.';\n      } else {\n        errorMsg = '‚ùå Camera Error';\n        errorDetails = error.message || 'Unknown camera error occurred.';\n        instructions = 'Please try refreshing the page or using a different browser.';\n      }\n      const fullErrorMessage = `${errorMsg}\\n\\n${errorDetails}\\n\\n${instructions}`;\n      setErrorMessage(fullErrorMessage);\n      setVerificationStep('error');\n      onFailure === null || onFailure === void 0 ? void 0 : onFailure(`Camera access failed: ${error.name || error.message || 'Unknown error'}`);\n    }\n  };\n  const getPermissionInstructions = () => {\n    const userAgent = navigator.userAgent.toLowerCase();\n    if (userAgent.includes('chrome')) {\n      return 'üìã Chrome Instructions:\\n1. Click the camera icon in the address bar\\n2. Select \"Always allow\" for camera access\\n3. Refresh the page and try again';\n    } else if (userAgent.includes('firefox')) {\n      return 'üìã Firefox Instructions:\\n1. Click the shield icon in the address bar\\n2. Click \"Allow\" for camera permissions\\n3. Refresh the page and try again';\n    } else if (userAgent.includes('safari')) {\n      return 'üìã Safari Instructions:\\n1. Go to Safari > Preferences > Websites\\n2. Select \"Camera\" from the left panel\\n3. Set this website to \"Allow\"\\n4. Refresh the page and try again';\n    } else {\n      return 'üìã General Instructions:\\n1. Check your browser settings for camera permissions\\n2. Allow camera access for this website\\n3. Refresh the page and try again';\n    }\n  };\n  const handleRetry = () => {\n    setVerificationStep('init');\n    setFaceDetected(false);\n    setCountdown(5);\n    setErrorMessage('');\n    if (cameraStream) {\n      cameraStream.getTracks().forEach(track => track.stop());\n      setCameraStream(null);\n    }\n  };\n  const renderContent = () => {\n    switch (verificationStep) {\n      case 'init':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-blue-100 to-purple-100 mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-10 w-10 text-indigo-600\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-gray-900 mb-2\",\n              children: \"\\uD83D\\uDD10 Biometric Face Verification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mb-4\",\n              children: \"Secure your healthcare data with advanced facial recognition technology\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-sm font-semibold text-blue-900 mb-2\",\n                children: \"\\uD83D\\uDCF8 Camera Permission Required\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-blue-800 space-y-1 text-left\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u2022 Your browser will ask for camera permission\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u2022 Click \\\"Allow\\\" to enable face verification\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u2022 Ensure good lighting for best results\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u2022 Position your face clearly in view\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-sm font-semibold text-gray-900 mb-2\",\n                children: \"\\u2699\\uFE0F System Requirements\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-700 space-y-1 text-left\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u2705 Working camera/webcam\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u2705 Modern browser (Chrome, Firefox, Safari)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u2705 HTTPS connection (secure)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u2705 Camera not in use by other apps\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center space-x-2 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(Badge, {\n                variant: \"success\",\n                size: \"sm\",\n                children: \"\\uD83D\\uDEE1\\uFE0F Secure\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                variant: \"primary\",\n                size: \"sm\",\n                children: \"\\u26A1 Fast\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                variant: \"secondary\",\n                size: \"sm\",\n                children: \"\\uD83D\\uDD12 Private\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: startCamera,\n              disabled: isLoading,\n              className: \"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 font-medium\",\n              children: isLoading ? 'üîÑ Initializing Camera...' : 'üì∑ Start Face Verification'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                console.log('‚ö†Ô∏è User chose to skip biometric verification');\n                onSuccess(); // Proceed directly to 2FA\n              },\n              className: \"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm\",\n              children: \"\\u23ED\\uFE0F Skip Camera & Use 2FA Only\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }, this);\n      case 'camera':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              className: \"w-full max-w-md mx-auto rounded-lg border-4 border-dashed border-indigo-300\",\n              autoPlay: true,\n              muted: true,\n              playsInline: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              className: \"hidden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 flex items-center justify-center pointer-events-none\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-48 h-48 rounded-full border-4 ${faceDetected ? 'border-green-500' : 'border-yellow-500'} ${faceDetected ? 'animate-pulse' : ''}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full h-full flex items-center justify-center\",\n                  children: faceDetected && /*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"w-8 h-8 text-green-500\",\n                    fill: \"currentColor\",\n                    viewBox: \"0 0 20 20\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      fillRule: \"evenodd\",\n                      d: \"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\",\n                      clipRule: \"evenodd\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 355,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center space-x-2\",\n              children: /*#__PURE__*/_jsxDEV(Badge, {\n                variant: faceDetected ? \"success\" : \"secondary\",\n                size: \"sm\",\n                children: faceDetected ? \"‚úì Face Detected\" : \"üîç Detecting Face...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-mono font-bold text-indigo-600\",\n              children: countdown > 0 ? `Capturing in ${countdown}...` : 'Processing...'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Please look directly at the camera and remain still\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 21\n        }, this);\n      case 'processing':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-yellow-100 to-orange-100\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-spin rounded-full h-12 w-12 border-b-4 border-yellow-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-gray-900 mb-2\",\n              children: \"\\uD83D\\uDD04 Processing Biometric Data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Analyzing facial features and matching against secure database...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 p-4 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-700\",\n              children: \"\\uD83D\\uDD12 Your biometric data is processed locally and never stored permanently\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 21\n        }, this);\n      case 'success':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-green-100 to-emerald-100\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-12 w-12 text-green-600\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-green-900 mb-2\",\n              children: \"\\u2705 Biometric Verification Successful\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Face recognition completed successfully. Proceeding to two-factor authentication...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Badge, {\n            variant: \"success\",\n            size: \"lg\",\n            children: \"Verified \\u2713\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 21\n        }, this);\n      case 'error':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-red-100 to-pink-100\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-12 w-12 text-red-600\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-red-900 mb-4\",\n              children: \"\\u274C Camera Verification Failed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\",\n              children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                className: \"text-sm text-red-800 whitespace-pre-wrap text-left\",\n                children: errorMessage || 'Biometric verification could not be completed'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-blue-900 mb-2\",\n              children: \"\\uD83D\\uDCA1 Quick Fixes:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-blue-800 text-left space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 Refresh the page and try again\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 Check if another app is using your camera\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 Ensure camera permissions are enabled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 Try a different browser (Chrome/Firefox/Safari)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 Use HTTPS or localhost for camera access\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleRetry,\n              className: \"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 font-medium\",\n              children: \"\\uD83D\\uDD04 Try Camera Again\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowTroubleshooting(true),\n              className: \"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 font-medium\",\n              children: \"\\uD83D\\uDEE0\\uFE0F Get Help & Troubleshooting\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                // Skip biometric verification and proceed to 2FA\n                console.log('‚ö†Ô∏è Biometric verification skipped due to camera issues');\n                onSuccess(); // Proceed to next step\n              },\n              className: \"w-full bg-yellow-600 text-white py-3 px-4 rounded-lg hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 font-medium\",\n              children: \"\\u23ED\\uFE0F Skip Camera & Use 2FA Only\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onClose,\n              className: \"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500\",\n              children: \"\\u274C Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 21\n        }, this);\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: \"\",\n    size: \"lg\",\n    showCloseButton: verificationStep === 'init' || verificationStep === 'error',\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-2\",\n      children: renderContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 493,\n    columnNumber: 9\n  }, this);\n};\n_s(EnhancedBiometricVerification, \"o8MoQnRVUHViQvo2w/4iO2/SPwM=\");\n_c = EnhancedBiometricVerification;\nexport default EnhancedBiometricVerification;\nvar _c;\n$RefreshReg$(_c, \"EnhancedBiometricVerification\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Modal","Badge","jsxDEV","_jsxDEV","EnhancedBiometricVerification","isOpen","onClose","onSuccess","onFailure","isLoading","_s","verificationStep","setVerificationStep","cameraStream","setCameraStream","faceDetected","setFaceDetected","countdown","setCountdown","errorMessage","setErrorMessage","showTroubleshooting","setShowTroubleshooting","videoRef","canvasRef","handleCaptureFace","current","canvas","video","context","getContext","width","videoWidth","height","videoHeight","drawImage","setTimeout","getTracks","forEach","track","stop","success","Math","random","timer","clearTimeout","checkCameraPermissions","window","isSecureContext","location","hostname","hasPermission","error","navigator","mediaDevices","getUserMedia","permissionStatus","permissions","query","name","state","permissionError","console","log","message","startCamera","permissionCheck","Error","stream","ideal","min","facingMode","audio","constraintError","basicError","srcObject","onloadedmetadata","play","catch","playError","onerror","videoError","_error$message","_error$message2","_error$message3","errorMsg","errorDetails","instructions","getPermissionInstructions","includes","fullErrorMessage","userAgent","toLowerCase","handleRetry","renderContent","className","children","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","variant","size","onClick","disabled","ref","autoPlay","muted","playsInline","fillRule","clipRule","title","showCloseButton","_c","$RefreshReg$"],"sources":["D:/DATA/CAREER/INTERNSHIPS/EMRChains Internship NSTP/PROJECTS/HEALTHCARE_SYSTEM/src/components/Auth/EnhancedBiometricVerification.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport Modal from '../UI/Modal';\r\nimport Badge from '../UI/Badge';\r\nimport CameraTroubleshootingGuide from './CameraTroubleshootingGuide';\r\n\r\ninterface EnhancedBiometricVerificationProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n    onFailure?: (error: string) => void;\r\n    isLoading?: boolean;\r\n}\r\n\r\nconst EnhancedBiometricVerification: React.FC<EnhancedBiometricVerificationProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    onSuccess,\r\n    onFailure,\r\n    isLoading = false\r\n}) => {\r\n    const [verificationStep, setVerificationStep] = useState<'init' | 'camera' | 'processing' | 'success' | 'error'>('init');\r\n    const [cameraStream, setCameraStream] = useState<MediaStream | null>(null);\r\n    const [faceDetected, setFaceDetected] = useState(false);\r\n    const [countdown, setCountdown] = useState(5);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const [showTroubleshooting, setShowTroubleshooting] = useState(false);\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n    const handleCaptureFace = useCallback(async () => {\r\n        if (!videoRef.current || !canvasRef.current) return;\r\n\r\n        setVerificationStep('processing');\r\n\r\n        const canvas = canvasRef.current;\r\n        const video = videoRef.current;\r\n        const context = canvas.getContext('2d');\r\n\r\n        if (context) {\r\n            canvas.width = video.videoWidth;\r\n            canvas.height = video.videoHeight;\r\n            context.drawImage(video, 0, 0);\r\n\r\n            // Simulate biometric processing\r\n            setTimeout(() => {\r\n                // Stop camera stream\r\n                if (cameraStream) {\r\n                    cameraStream.getTracks().forEach(track => track.stop());\r\n                    setCameraStream(null);\r\n                }\r\n\r\n                // Simulate successful face recognition\r\n                const success = Math.random() > 0.1; // 90% success rate for demo\r\n\r\n                if (success) {\r\n                    setVerificationStep('success');\r\n                    setTimeout(() => {\r\n                        onSuccess();\r\n                    }, 1500);\r\n                } else {\r\n                    setErrorMessage('Face recognition failed. Please try again.');\r\n                    setVerificationStep('error');\r\n                    onFailure?.('Face recognition failed');\r\n                }\r\n            }, 3000);\r\n        }\r\n    }, [cameraStream, onSuccess, onFailure]);\r\n\r\n    useEffect(() => {\r\n        if (verificationStep === 'camera' && countdown > 0) {\r\n            const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\r\n            return () => clearTimeout(timer);\r\n        } else if (verificationStep === 'camera' && countdown === 0) {\r\n            handleCaptureFace();\r\n        }\r\n    }, [verificationStep, countdown, handleCaptureFace]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (cameraStream) {\r\n                cameraStream.getTracks().forEach(track => track.stop());\r\n            }\r\n        };\r\n    }, [cameraStream]);\r\n\r\n    const checkCameraPermissions = async (): Promise<{ hasPermission: boolean; error?: string }> => {\r\n        try {\r\n            // Check if we're in a secure context (HTTPS or localhost)\r\n            if (!window.isSecureContext && window.location.hostname !== 'localhost') {\r\n                return { \r\n                    hasPermission: false, \r\n                    error: 'Camera access requires HTTPS or localhost. Please ensure you are using a secure connection.' \r\n                };\r\n            }\r\n\r\n            // Check if mediaDevices is supported\r\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n                return { \r\n                    hasPermission: false, \r\n                    error: 'Your browser does not support camera access. Please use Chrome, Firefox, or Safari.' \r\n                };\r\n            }\r\n\r\n            // Try to get camera permissions without actually starting the camera\r\n            try {\r\n                const permissionStatus = await navigator.permissions.query({ name: 'camera' as PermissionName });\r\n                if (permissionStatus.state === 'denied') {\r\n                    return { \r\n                        hasPermission: false, \r\n                        error: 'Camera permission is permanently denied. Please check your browser settings.' \r\n                    };\r\n                }\r\n            } catch (permissionError) {\r\n                // Permissions API might not be supported, we'll try getUserMedia directly\r\n                console.log('Permissions API not available, will attempt direct camera access');\r\n            }\r\n\r\n            return { hasPermission: true };\r\n        } catch (error: any) {\r\n            return { \r\n                hasPermission: false, \r\n                error: `Permission check failed: ${error.message}` \r\n            };\r\n        }\r\n    };\r\n\r\n    const startCamera = async () => {\r\n        try {\r\n            setVerificationStep('camera');\r\n            setCountdown(5);\r\n            setErrorMessage('');\r\n\r\n            // First check permissions\r\n            const permissionCheck = await checkCameraPermissions();\r\n            if (!permissionCheck.hasPermission) {\r\n                throw new Error(permissionCheck.error);\r\n            }\r\n\r\n            // Start with more permissive camera constraints\r\n            let stream: MediaStream;\r\n            \r\n            try {\r\n                // Try with ideal constraints first\r\n                stream = await navigator.mediaDevices.getUserMedia({\r\n                    video: {\r\n                        width: { ideal: 640, min: 320 },\r\n                        height: { ideal: 480, min: 240 },\r\n                        facingMode: 'user'\r\n                    },\r\n                    audio: false\r\n                });\r\n            } catch (constraintError) {\r\n                console.log('Ideal constraints failed, trying basic constraints:', constraintError);\r\n                try {\r\n                    // Fallback to basic constraints\r\n                    stream = await navigator.mediaDevices.getUserMedia({\r\n                        video: true,\r\n                        audio: false\r\n                    });\r\n                } catch (basicError) {\r\n                    console.log('Basic constraints also failed, trying minimal constraints:', basicError);\r\n                    // Last resort: minimal constraints\r\n                    stream = await navigator.mediaDevices.getUserMedia({\r\n                        video: { facingMode: 'user' },\r\n                        audio: false\r\n                    });\r\n                }\r\n            }\r\n\r\n            setCameraStream(stream);\r\n\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = stream;\r\n                \r\n                // Handle video load events\r\n                videoRef.current.onloadedmetadata = () => {\r\n                    if (videoRef.current) {\r\n                        videoRef.current.play().catch(playError => {\r\n                            console.error('Video play failed:', playError);\r\n                            setErrorMessage('Failed to start video playback. Your browser might be blocking autoplay.');\r\n                            setVerificationStep('error');\r\n                        });\r\n                    }\r\n                };\r\n\r\n                videoRef.current.onerror = (videoError) => {\r\n                    console.error('Video error:', videoError);\r\n                    setErrorMessage('Video stream error occurred. Please check your camera connection.');\r\n                    setVerificationStep('error');\r\n                };\r\n            }\r\n\r\n            // Simulate face detection after a delay\r\n            setTimeout(() => {\r\n                setFaceDetected(true);\r\n            }, 2000);\r\n\r\n        } catch (error: any) {\r\n            console.error('Camera access error:', error);\r\n\r\n            let errorMsg = 'Camera access failed';\r\n            let errorDetails = '';\r\n            let instructions = '';\r\n\r\n            // Handle specific error types with detailed instructions\r\n            if (error.name === 'NotAllowedError' || error.name === 'PermissionDeniedError') {\r\n                errorMsg = 'üö´ Camera Permission Denied';\r\n                errorDetails = 'Camera access was blocked by your browser.';\r\n                instructions = getPermissionInstructions();\r\n            } else if (error.name === 'NotFoundError' || error.name === 'DevicesNotFoundError') {\r\n                errorMsg = 'üì∑ No Camera Found';\r\n                errorDetails = 'No camera device was detected on this device.';\r\n                instructions = 'Please ensure your camera is connected and working properly.';\r\n            } else if (error.name === 'NotReadableError' || error.name === 'TrackStartError') {\r\n                errorMsg = '‚ö†Ô∏è Camera In Use';\r\n                errorDetails = 'Camera is being used by another application.';\r\n                instructions = 'Please close other applications that might be using the camera (Zoom, Skype, etc.) and try again.';\r\n            } else if (error.name === 'OverconstrainedError' || error.name === 'ConstraintNotSatisfiedError') {\r\n                errorMsg = '‚öôÔ∏è Camera Constraints Error';\r\n                errorDetails = 'Camera does not support the required specifications.';\r\n                instructions = 'Your camera might not support the required resolution. Please try with a different camera.';\r\n            } else if (error.message?.includes('secure context') || error.message?.includes('HTTPS')) {\r\n                errorMsg = 'üîí Secure Connection Required';\r\n                errorDetails = 'Camera access requires HTTPS or localhost.';\r\n                instructions = 'Please access this page via HTTPS (https://) or localhost for camera functionality.';\r\n            } else if (error.message?.includes('not supported')) {\r\n                errorMsg = 'üåê Browser Not Supported';\r\n                errorDetails = 'Your browser does not support camera access.';\r\n                instructions = 'Please use a modern browser like Chrome, Firefox, or Safari.';\r\n            } else {\r\n                errorMsg = '‚ùå Camera Error';\r\n                errorDetails = error.message || 'Unknown camera error occurred.';\r\n                instructions = 'Please try refreshing the page or using a different browser.';\r\n            }\r\n\r\n            const fullErrorMessage = `${errorMsg}\\n\\n${errorDetails}\\n\\n${instructions}`;\r\n            setErrorMessage(fullErrorMessage);\r\n            setVerificationStep('error');\r\n            onFailure?.(`Camera access failed: ${error.name || error.message || 'Unknown error'}`);\r\n        }\r\n    };\r\n\r\n    const getPermissionInstructions = (): string => {\r\n        const userAgent = navigator.userAgent.toLowerCase();\r\n        \r\n        if (userAgent.includes('chrome')) {\r\n            return 'üìã Chrome Instructions:\\n1. Click the camera icon in the address bar\\n2. Select \"Always allow\" for camera access\\n3. Refresh the page and try again';\r\n        } else if (userAgent.includes('firefox')) {\r\n            return 'üìã Firefox Instructions:\\n1. Click the shield icon in the address bar\\n2. Click \"Allow\" for camera permissions\\n3. Refresh the page and try again';\r\n        } else if (userAgent.includes('safari')) {\r\n            return 'üìã Safari Instructions:\\n1. Go to Safari > Preferences > Websites\\n2. Select \"Camera\" from the left panel\\n3. Set this website to \"Allow\"\\n4. Refresh the page and try again';\r\n        } else {\r\n            return 'üìã General Instructions:\\n1. Check your browser settings for camera permissions\\n2. Allow camera access for this website\\n3. Refresh the page and try again';\r\n        }\r\n    };\r\n\r\n    const handleRetry = () => {\r\n        setVerificationStep('init');\r\n        setFaceDetected(false);\r\n        setCountdown(5);\r\n        setErrorMessage('');\r\n        if (cameraStream) {\r\n            cameraStream.getTracks().forEach(track => track.stop());\r\n            setCameraStream(null);\r\n        }\r\n    };\r\n\r\n    const renderContent = () => {\r\n        switch (verificationStep) {\r\n            case 'init':\r\n                return (\r\n                    <div className=\"text-center space-y-6\">\r\n                        <div className=\"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-blue-100 to-purple-100 mb-4\">\r\n                            <svg className=\"h-10 w-10 text-indigo-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n                                üîê Biometric Face Verification\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-600 mb-4\">\r\n                                Secure your healthcare data with advanced facial recognition technology\r\n                            </p>\r\n                            \r\n                            {/* Camera Permission Guide */}\r\n                            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\r\n                                <h4 className=\"text-sm font-semibold text-blue-900 mb-2\">üì∏ Camera Permission Required</h4>\r\n                                <div className=\"text-xs text-blue-800 space-y-1 text-left\">\r\n                                    <p>‚Ä¢ Your browser will ask for camera permission</p>\r\n                                    <p>‚Ä¢ Click \"Allow\" to enable face verification</p>\r\n                                    <p>‚Ä¢ Ensure good lighting for best results</p>\r\n                                    <p>‚Ä¢ Position your face clearly in view</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* System Requirements */}\r\n                            <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4\">\r\n                                <h4 className=\"text-sm font-semibold text-gray-900 mb-2\">‚öôÔ∏è System Requirements</h4>\r\n                                <div className=\"text-xs text-gray-700 space-y-1 text-left\">\r\n                                    <p>‚úÖ Working camera/webcam</p>\r\n                                    <p>‚úÖ Modern browser (Chrome, Firefox, Safari)</p>\r\n                                    <p>‚úÖ HTTPS connection (secure)</p>\r\n                                    <p>‚úÖ Camera not in use by other apps</p>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div className=\"flex justify-center space-x-2 mb-6\">\r\n                                <Badge variant=\"success\" size=\"sm\">üõ°Ô∏è Secure</Badge>\r\n                                <Badge variant=\"primary\" size=\"sm\">‚ö° Fast</Badge>\r\n                                <Badge variant=\"secondary\" size=\"sm\">üîí Private</Badge>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"space-y-3\">\r\n                            <button\r\n                                onClick={startCamera}\r\n                                disabled={isLoading}\r\n                                className=\"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 font-medium\"\r\n                            >\r\n                                {isLoading ? 'üîÑ Initializing Camera...' : 'üì∑ Start Face Verification'}\r\n                            </button>\r\n                            <button\r\n                                onClick={() => {\r\n                                    console.log('‚ö†Ô∏è User chose to skip biometric verification');\r\n                                    onSuccess(); // Proceed directly to 2FA\r\n                                }}\r\n                                className=\"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm\"\r\n                            >\r\n                                ‚è≠Ô∏è Skip Camera & Use 2FA Only\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            case 'camera':\r\n                return (\r\n                    <div className=\"text-center space-y-4\">\r\n                        <div className=\"relative\">\r\n                            <video\r\n                                ref={videoRef}\r\n                                className=\"w-full max-w-md mx-auto rounded-lg border-4 border-dashed border-indigo-300\"\r\n                                autoPlay\r\n                                muted\r\n                                playsInline\r\n                            />\r\n                            <canvas ref={canvasRef} className=\"hidden\" />\r\n\r\n                            {/* Face detection overlay */}\r\n                            <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                                <div className={`w-48 h-48 rounded-full border-4 ${faceDetected ? 'border-green-500' : 'border-yellow-500'} ${faceDetected ? 'animate-pulse' : ''}`}>\r\n                                    <div className=\"w-full h-full flex items-center justify-center\">\r\n                                        {faceDetected && (\r\n                                            <svg className=\"w-8 h-8 text-green-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                                <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                                            </svg>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <div className=\"flex justify-center space-x-2\">\r\n                                <Badge variant={faceDetected ? \"success\" : \"secondary\"} size=\"sm\">\r\n                                    {faceDetected ? \"‚úì Face Detected\" : \"üîç Detecting Face...\"}\r\n                                </Badge>\r\n                            </div>\r\n\r\n                            <div className=\"text-lg font-mono font-bold text-indigo-600\">\r\n                                {countdown > 0 ? `Capturing in ${countdown}...` : 'Processing...'}\r\n                            </div>\r\n\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                Please look directly at the camera and remain still\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            case 'processing':\r\n                return (\r\n                    <div className=\"text-center space-y-6\">\r\n                        <div className=\"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-yellow-100 to-orange-100\">\r\n                            <div className=\"animate-spin rounded-full h-12 w-12 border-b-4 border-yellow-600\"></div>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n                                üîÑ Processing Biometric Data\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                Analyzing facial features and matching against secure database...\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n                            <p className=\"text-sm text-blue-700\">\r\n                                üîí Your biometric data is processed locally and never stored permanently\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            case 'success':\r\n                return (\r\n                    <div className=\"text-center space-y-6\">\r\n                        <div className=\"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-green-100 to-emerald-100\">\r\n                            <svg className=\"h-12 w-12 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold text-green-900 mb-2\">\r\n                                ‚úÖ Biometric Verification Successful\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                Face recognition completed successfully. Proceeding to two-factor authentication...\r\n                            </p>\r\n                        </div>\r\n                        <Badge variant=\"success\" size=\"lg\">Verified ‚úì</Badge>\r\n                    </div>\r\n                );\r\n\r\n            case 'error':\r\n                return (\r\n                    <div className=\"text-center space-y-6\">\r\n                        <div className=\"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-red-100 to-pink-100\">\r\n                            <svg className=\"h-12 w-12 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold text-red-900 mb-4\">\r\n                                ‚ùå Camera Verification Failed\r\n                            </h3>\r\n                            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\r\n                                <pre className=\"text-sm text-red-800 whitespace-pre-wrap text-left\">\r\n                                    {errorMessage || 'Biometric verification could not be completed'}\r\n                                </pre>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        {/* Troubleshooting Tips */}\r\n                        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n                            <h4 className=\"font-semibold text-blue-900 mb-2\">üí° Quick Fixes:</h4>\r\n                            <div className=\"text-sm text-blue-800 text-left space-y-1\">\r\n                                <p>‚Ä¢ Refresh the page and try again</p>\r\n                                <p>‚Ä¢ Check if another app is using your camera</p>\r\n                                <p>‚Ä¢ Ensure camera permissions are enabled</p>\r\n                                <p>‚Ä¢ Try a different browser (Chrome/Firefox/Safari)</p>\r\n                                <p>‚Ä¢ Use HTTPS or localhost for camera access</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3\">\r\n                            <button\r\n                                onClick={handleRetry}\r\n                                className=\"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 font-medium\"\r\n                            >\r\n                                üîÑ Try Camera Again\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setShowTroubleshooting(true)}\r\n                                className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 font-medium\"\r\n                            >\r\n                                üõ†Ô∏è Get Help & Troubleshooting\r\n                            </button>\r\n                            <button\r\n                                onClick={() => {\r\n                                    // Skip biometric verification and proceed to 2FA\r\n                                    console.log('‚ö†Ô∏è Biometric verification skipped due to camera issues');\r\n                                    onSuccess(); // Proceed to next step\r\n                                }}\r\n                                className=\"w-full bg-yellow-600 text-white py-3 px-4 rounded-lg hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 font-medium\"\r\n                            >\r\n                                ‚è≠Ô∏è Skip Camera & Use 2FA Only\r\n                            </button>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                            >\r\n                                ‚ùå Cancel\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose} title=\"\" size=\"lg\" showCloseButton={verificationStep === 'init' || verificationStep === 'error'}>\r\n            <div className=\"p-2\">\r\n                {renderContent()}\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default EnhancedBiometricVerification;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}