{"ast":null,"code":"var _jsxFileName = \"D:\\\\DATA\\\\CAREER\\\\INTERNSHIPS\\\\EMRChains Internship NSTP\\\\PROJECTS\\\\HEALTHCARE_SYSTEM\\\\src\\\\components\\\\Auth\\\\EnhancedBiometricVerification.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport Modal from '../UI/Modal';\nimport Badge from '../UI/Badge';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EnhancedBiometricVerification = ({\n  isOpen,\n  onClose,\n  onSuccess,\n  onFailure,\n  isLoading = false\n}) => {\n  _s();\n  const [verificationStep, setVerificationStep] = useState('init');\n  const [cameraStream, setCameraStream] = useState(null);\n  const [faceDetected, setFaceDetected] = useState(false);\n  const [countdown, setCountdown] = useState(5);\n  const [errorMessage, setErrorMessage] = useState('');\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const handleCaptureFace = useCallback(async () => {\n    if (!videoRef.current || !canvasRef.current) return;\n    setVerificationStep('processing');\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    const context = canvas.getContext('2d');\n    if (context) {\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      context.drawImage(video, 0, 0);\n\n      // Simulate biometric processing\n      setTimeout(() => {\n        // Stop camera stream\n        if (cameraStream) {\n          cameraStream.getTracks().forEach(track => track.stop());\n          setCameraStream(null);\n        }\n\n        // Simulate successful face recognition\n        const success = Math.random() > 0.1; // 90% success rate for demo\n\n        if (success) {\n          setVerificationStep('success');\n          setTimeout(() => {\n            onSuccess();\n          }, 1500);\n        } else {\n          setErrorMessage('Face recognition failed. Please try again.');\n          setVerificationStep('error');\n          onFailure === null || onFailure === void 0 ? void 0 : onFailure('Face recognition failed');\n        }\n      }, 3000);\n    }\n  }, [cameraStream, onSuccess, onFailure]);\n  useEffect(() => {\n    if (verificationStep === 'camera' && countdown > 0) {\n      const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n      return () => clearTimeout(timer);\n    } else if (verificationStep === 'camera' && countdown === 0) {\n      handleCaptureFace();\n    }\n  }, [verificationStep, countdown, handleCaptureFace]);\n  useEffect(() => {\n    return () => {\n      if (cameraStream) {\n        cameraStream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, [cameraStream]);\n  const startCamera = async () => {\n    try {\n      setVerificationStep('camera');\n      setCountdown(5);\n      setErrorMessage('');\n\n      // Check if camera is available\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('Camera API not supported by this browser');\n      }\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: {\n            ideal: 640\n          },\n          height: {\n            ideal: 480\n          },\n          facingMode: 'user'\n        },\n        audio: false\n      });\n      setCameraStream(stream);\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.play();\n      }\n\n      // Simulate face detection\n      setTimeout(() => {\n        setFaceDetected(true);\n      }, 2000);\n    } catch (error) {\n      console.error('Camera access error:', error);\n      let errorMsg = 'Unable to access camera. ';\n      if (error.name === 'NotAllowedError' || error.name === 'PermissionDeniedError') {\n        errorMsg += 'Camera permission was denied. Please allow camera access and try again.';\n      } else if (error.name === 'NotFoundError' || error.name === 'DevicesNotFoundError') {\n        errorMsg += 'No camera found on this device.';\n      } else if (error.name === 'NotReadableError' || error.name === 'TrackStartError') {\n        errorMsg += 'Camera is already in use by another application.';\n      } else if (error.name === 'OverconstrainedError' || error.name === 'ConstraintNotSatisfiedError') {\n        errorMsg += 'Camera does not meet the required specifications.';\n      } else {\n        errorMsg += 'Please check your camera settings and try again.';\n      }\n      setErrorMessage(errorMsg);\n      setVerificationStep('error');\n      onFailure === null || onFailure === void 0 ? void 0 : onFailure(`Camera access denied: ${error.name || 'Unknown error'}`);\n    }\n  };\n  const handleRetry = () => {\n    setVerificationStep('init');\n    setFaceDetected(false);\n    setCountdown(5);\n    setErrorMessage('');\n    if (cameraStream) {\n      cameraStream.getTracks().forEach(track => track.stop());\n      setCameraStream(null);\n    }\n  };\n  const renderContent = () => {\n    switch (verificationStep) {\n      case 'init':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-blue-100 to-purple-100 mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-10 w-10 text-indigo-600\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-gray-900 mb-2\",\n              children: \"\\uD83D\\uDD10 Biometric Face Verification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mb-4\",\n              children: \"Please position your face in front of the camera for secure verification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center space-x-2 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(Badge, {\n                variant: \"success\",\n                size: \"sm\",\n                children: \"\\uD83D\\uDEE1\\uFE0F Secure\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                variant: \"primary\",\n                size: \"sm\",\n                children: \"\\u26A1 Fast\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                variant: \"secondary\",\n                size: \"sm\",\n                children: \"\\uD83D\\uDD12 Private\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: startCamera,\n              disabled: isLoading,\n              className: \"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 font-medium\",\n              children: isLoading ? 'Initializing...' : 'Start Face Verification'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                console.log('⚠️ User chose to skip biometric verification');\n                onSuccess(); // Proceed directly to 2FA\n              },\n              className: \"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm\",\n              children: \"Skip Camera & Use 2FA Only\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this);\n      case 'camera':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              className: \"w-full max-w-md mx-auto rounded-lg border-4 border-dashed border-indigo-300\",\n              autoPlay: true,\n              muted: true,\n              playsInline: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              className: \"hidden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 flex items-center justify-center pointer-events-none\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-48 h-48 rounded-full border-4 ${faceDetected ? 'border-green-500' : 'border-yellow-500'} ${faceDetected ? 'animate-pulse' : ''}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full h-full flex items-center justify-center\",\n                  children: faceDetected && /*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"w-8 h-8 text-green-500\",\n                    fill: \"currentColor\",\n                    viewBox: \"0 0 20 20\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      fillRule: \"evenodd\",\n                      d: \"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\",\n                      clipRule: \"evenodd\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 214,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center space-x-2\",\n              children: /*#__PURE__*/_jsxDEV(Badge, {\n                variant: faceDetected ? \"success\" : \"secondary\",\n                size: \"sm\",\n                children: faceDetected ? \"✓ Face Detected\" : \"🔍 Detecting Face...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-mono font-bold text-indigo-600\",\n              children: countdown > 0 ? `Capturing in ${countdown}...` : 'Processing...'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Please look directly at the camera and remain still\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this);\n      case 'processing':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-yellow-100 to-orange-100\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-spin rounded-full h-12 w-12 border-b-4 border-yellow-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-gray-900 mb-2\",\n              children: \"\\uD83D\\uDD04 Processing Biometric Data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Analyzing facial features and matching against secure database...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 p-4 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-700\",\n              children: \"\\uD83D\\uDD12 Your biometric data is processed locally and never stored permanently\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 21\n        }, this);\n      case 'success':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-green-100 to-emerald-100\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-12 w-12 text-green-600\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-green-900 mb-2\",\n              children: \"\\u2705 Biometric Verification Successful\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Face recognition completed successfully. Proceeding to two-factor authentication...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Badge, {\n            variant: \"success\",\n            size: \"lg\",\n            children: \"Verified \\u2713\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 21\n        }, this);\n      case 'error':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-red-100 to-pink-100\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-12 w-12 text-red-600\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-red-900 mb-2\",\n              children: \"\\u274C Verification Failed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mb-4\",\n              children: errorMessage || 'Biometric verification could not be completed'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleRetry,\n              className: \"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500\",\n              children: \"Try Again\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                // Skip biometric verification and proceed to 2FA\n                console.log('⚠️ Biometric verification skipped due to camera issues');\n                onSuccess(); // Proceed to next step\n              },\n              className: \"w-full bg-yellow-600 text-white py-2 px-4 rounded-lg hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500\",\n              children: \"Skip Camera & Continue with 2FA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onClose,\n              className: \"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 21\n        }, this);\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: \"\",\n    size: \"lg\",\n    showCloseButton: verificationStep === 'init' || verificationStep === 'error',\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-2\",\n      children: renderContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 331,\n    columnNumber: 9\n  }, this);\n};\n_s(EnhancedBiometricVerification, \"bb19FSrZXCIDqsTO4Ng7Z2l2yV8=\");\n_c = EnhancedBiometricVerification;\nexport default EnhancedBiometricVerification;\nvar _c;\n$RefreshReg$(_c, \"EnhancedBiometricVerification\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Modal","Badge","jsxDEV","_jsxDEV","EnhancedBiometricVerification","isOpen","onClose","onSuccess","onFailure","isLoading","_s","verificationStep","setVerificationStep","cameraStream","setCameraStream","faceDetected","setFaceDetected","countdown","setCountdown","errorMessage","setErrorMessage","videoRef","canvasRef","handleCaptureFace","current","canvas","video","context","getContext","width","videoWidth","height","videoHeight","drawImage","setTimeout","getTracks","forEach","track","stop","success","Math","random","timer","clearTimeout","startCamera","navigator","mediaDevices","getUserMedia","Error","stream","ideal","facingMode","audio","srcObject","play","error","console","errorMsg","name","handleRetry","renderContent","className","children","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","variant","size","onClick","disabled","log","ref","autoPlay","muted","playsInline","fillRule","clipRule","title","showCloseButton","_c","$RefreshReg$"],"sources":["D:/DATA/CAREER/INTERNSHIPS/EMRChains Internship NSTP/PROJECTS/HEALTHCARE_SYSTEM/src/components/Auth/EnhancedBiometricVerification.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport Modal from '../UI/Modal';\r\nimport Badge from '../UI/Badge';\r\n\r\ninterface EnhancedBiometricVerificationProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n    onFailure?: (error: string) => void;\r\n    isLoading?: boolean;\r\n}\r\n\r\nconst EnhancedBiometricVerification: React.FC<EnhancedBiometricVerificationProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    onSuccess,\r\n    onFailure,\r\n    isLoading = false\r\n}) => {\r\n    const [verificationStep, setVerificationStep] = useState<'init' | 'camera' | 'processing' | 'success' | 'error'>('init');\r\n    const [cameraStream, setCameraStream] = useState<MediaStream | null>(null);\r\n    const [faceDetected, setFaceDetected] = useState(false);\r\n    const [countdown, setCountdown] = useState(5);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n    const handleCaptureFace = useCallback(async () => {\r\n        if (!videoRef.current || !canvasRef.current) return;\r\n\r\n        setVerificationStep('processing');\r\n\r\n        const canvas = canvasRef.current;\r\n        const video = videoRef.current;\r\n        const context = canvas.getContext('2d');\r\n\r\n        if (context) {\r\n            canvas.width = video.videoWidth;\r\n            canvas.height = video.videoHeight;\r\n            context.drawImage(video, 0, 0);\r\n\r\n            // Simulate biometric processing\r\n            setTimeout(() => {\r\n                // Stop camera stream\r\n                if (cameraStream) {\r\n                    cameraStream.getTracks().forEach(track => track.stop());\r\n                    setCameraStream(null);\r\n                }\r\n\r\n                // Simulate successful face recognition\r\n                const success = Math.random() > 0.1; // 90% success rate for demo\r\n\r\n                if (success) {\r\n                    setVerificationStep('success');\r\n                    setTimeout(() => {\r\n                        onSuccess();\r\n                    }, 1500);\r\n                } else {\r\n                    setErrorMessage('Face recognition failed. Please try again.');\r\n                    setVerificationStep('error');\r\n                    onFailure?.('Face recognition failed');\r\n                }\r\n            }, 3000);\r\n        }\r\n    }, [cameraStream, onSuccess, onFailure]);\r\n\r\n    useEffect(() => {\r\n        if (verificationStep === 'camera' && countdown > 0) {\r\n            const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\r\n            return () => clearTimeout(timer);\r\n        } else if (verificationStep === 'camera' && countdown === 0) {\r\n            handleCaptureFace();\r\n        }\r\n    }, [verificationStep, countdown, handleCaptureFace]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (cameraStream) {\r\n                cameraStream.getTracks().forEach(track => track.stop());\r\n            }\r\n        };\r\n    }, [cameraStream]);\r\n\r\n    const startCamera = async () => {\r\n        try {\r\n            setVerificationStep('camera');\r\n            setCountdown(5);\r\n            setErrorMessage('');\r\n\r\n            // Check if camera is available\r\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n                throw new Error('Camera API not supported by this browser');\r\n            }\r\n\r\n            const stream = await navigator.mediaDevices.getUserMedia({\r\n                video: {\r\n                    width: { ideal: 640 },\r\n                    height: { ideal: 480 },\r\n                    facingMode: 'user'\r\n                },\r\n                audio: false\r\n            });\r\n\r\n            setCameraStream(stream);\r\n\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = stream;\r\n                videoRef.current.play();\r\n            }\r\n\r\n            // Simulate face detection\r\n            setTimeout(() => {\r\n                setFaceDetected(true);\r\n            }, 2000);\r\n\r\n        } catch (error: any) {\r\n            console.error('Camera access error:', error);\r\n            \r\n            let errorMsg = 'Unable to access camera. ';\r\n            \r\n            if (error.name === 'NotAllowedError' || error.name === 'PermissionDeniedError') {\r\n                errorMsg += 'Camera permission was denied. Please allow camera access and try again.';\r\n            } else if (error.name === 'NotFoundError' || error.name === 'DevicesNotFoundError') {\r\n                errorMsg += 'No camera found on this device.';\r\n            } else if (error.name === 'NotReadableError' || error.name === 'TrackStartError') {\r\n                errorMsg += 'Camera is already in use by another application.';\r\n            } else if (error.name === 'OverconstrainedError' || error.name === 'ConstraintNotSatisfiedError') {\r\n                errorMsg += 'Camera does not meet the required specifications.';\r\n            } else {\r\n                errorMsg += 'Please check your camera settings and try again.';\r\n            }\r\n            \r\n            setErrorMessage(errorMsg);\r\n            setVerificationStep('error');\r\n            onFailure?.(`Camera access denied: ${error.name || 'Unknown error'}`);\r\n        }\r\n    };\r\n\r\n    const handleRetry = () => {\r\n        setVerificationStep('init');\r\n        setFaceDetected(false);\r\n        setCountdown(5);\r\n        setErrorMessage('');\r\n        if (cameraStream) {\r\n            cameraStream.getTracks().forEach(track => track.stop());\r\n            setCameraStream(null);\r\n        }\r\n    };\r\n\r\n    const renderContent = () => {\r\n        switch (verificationStep) {\r\n            case 'init':\r\n                return (\r\n                    <div className=\"text-center space-y-6\">\r\n                        <div className=\"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-blue-100 to-purple-100 mb-4\">\r\n                            <svg className=\"h-10 w-10 text-indigo-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n                                🔐 Biometric Face Verification\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-600 mb-4\">\r\n                                Please position your face in front of the camera for secure verification\r\n                            </p>\r\n                            <div className=\"flex justify-center space-x-2 mb-6\">\r\n                                <Badge variant=\"success\" size=\"sm\">🛡️ Secure</Badge>\r\n                                <Badge variant=\"primary\" size=\"sm\">⚡ Fast</Badge>\r\n                                <Badge variant=\"secondary\" size=\"sm\">🔒 Private</Badge>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"space-y-3\">\r\n                            <button\r\n                                onClick={startCamera}\r\n                                disabled={isLoading}\r\n                                className=\"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 font-medium\"\r\n                            >\r\n                                {isLoading ? 'Initializing...' : 'Start Face Verification'}\r\n                            </button>\r\n                            <button\r\n                                onClick={() => {\r\n                                    console.log('⚠️ User chose to skip biometric verification');\r\n                                    onSuccess(); // Proceed directly to 2FA\r\n                                }}\r\n                                className=\"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm\"\r\n                            >\r\n                                Skip Camera & Use 2FA Only\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            case 'camera':\r\n                return (\r\n                    <div className=\"text-center space-y-4\">\r\n                        <div className=\"relative\">\r\n                            <video\r\n                                ref={videoRef}\r\n                                className=\"w-full max-w-md mx-auto rounded-lg border-4 border-dashed border-indigo-300\"\r\n                                autoPlay\r\n                                muted\r\n                                playsInline\r\n                            />\r\n                            <canvas ref={canvasRef} className=\"hidden\" />\r\n\r\n                            {/* Face detection overlay */}\r\n                            <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                                <div className={`w-48 h-48 rounded-full border-4 ${faceDetected ? 'border-green-500' : 'border-yellow-500'} ${faceDetected ? 'animate-pulse' : ''}`}>\r\n                                    <div className=\"w-full h-full flex items-center justify-center\">\r\n                                        {faceDetected && (\r\n                                            <svg className=\"w-8 h-8 text-green-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                                <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                                            </svg>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <div className=\"flex justify-center space-x-2\">\r\n                                <Badge variant={faceDetected ? \"success\" : \"secondary\"} size=\"sm\">\r\n                                    {faceDetected ? \"✓ Face Detected\" : \"🔍 Detecting Face...\"}\r\n                                </Badge>\r\n                            </div>\r\n\r\n                            <div className=\"text-lg font-mono font-bold text-indigo-600\">\r\n                                {countdown > 0 ? `Capturing in ${countdown}...` : 'Processing...'}\r\n                            </div>\r\n\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                Please look directly at the camera and remain still\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            case 'processing':\r\n                return (\r\n                    <div className=\"text-center space-y-6\">\r\n                        <div className=\"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-yellow-100 to-orange-100\">\r\n                            <div className=\"animate-spin rounded-full h-12 w-12 border-b-4 border-yellow-600\"></div>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n                                🔄 Processing Biometric Data\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                Analyzing facial features and matching against secure database...\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n                            <p className=\"text-sm text-blue-700\">\r\n                                🔒 Your biometric data is processed locally and never stored permanently\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            case 'success':\r\n                return (\r\n                    <div className=\"text-center space-y-6\">\r\n                        <div className=\"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-green-100 to-emerald-100\">\r\n                            <svg className=\"h-12 w-12 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold text-green-900 mb-2\">\r\n                                ✅ Biometric Verification Successful\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                Face recognition completed successfully. Proceeding to two-factor authentication...\r\n                            </p>\r\n                        </div>\r\n                        <Badge variant=\"success\" size=\"lg\">Verified ✓</Badge>\r\n                    </div>\r\n                );\r\n\r\n            case 'error':\r\n                return (\r\n                    <div className=\"text-center space-y-6\">\r\n                        <div className=\"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-gradient-to-r from-red-100 to-pink-100\">\r\n                            <svg className=\"h-12 w-12 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold text-red-900 mb-2\">\r\n                                ❌ Verification Failed\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-600 mb-4\">\r\n                                {errorMessage || 'Biometric verification could not be completed'}\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"space-y-3\">\r\n                            <button\r\n                                onClick={handleRetry}\r\n                                className=\"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                            >\r\n                                Try Again\r\n                            </button>\r\n                            <button\r\n                                onClick={() => {\r\n                                    // Skip biometric verification and proceed to 2FA\r\n                                    console.log('⚠️ Biometric verification skipped due to camera issues');\r\n                                    onSuccess(); // Proceed to next step\r\n                                }}\r\n                                className=\"w-full bg-yellow-600 text-white py-2 px-4 rounded-lg hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500\"\r\n                            >\r\n                                Skip Camera & Continue with 2FA\r\n                            </button>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose} title=\"\" size=\"lg\" showCloseButton={verificationStep === 'init' || verificationStep === 'error'}>\r\n            <div className=\"p-2\">\r\n                {renderContent()}\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default EnhancedBiometricVerification;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}